!function(o){o.factory("CKolorFactory",function(){var o={alpha:100,ckoloring:!1,defaultColor:"#FFFFFF",display:"hex",inputHsl:{h:null,s:null,l:null},hex:null,hsl:{h:null,s:null,l:null},hues:[105,135,165,195,225,255,285,315,345,15,45,75],model:null,modelId:null,originalFormat:null,previousColors:[],rgb:{r:null,g:null,b:null},circleWidth:0,init:function(l){o.alpha=100,o.defaultColor=l.defaultColor?l.defaultColor:"#FFFFFF",o.model=l.model,o.modelId=l.modelId;var r=angular.fromJson(localStorage.aCKolorPreviousColors);r&&(o.previousColors=r);var a=o.convertTo();a&&(o.hsl.h=o.inputHsl.h=a.h,o.hsl.s=o.inputHsl.s=a.s,o.hsl.l=o.inputHsl.l=a.l,o.rgb=o.hslToRgb(a),o.hex=o.rgbToHex(o.rgb),o.display=o.originalFormat)},save:function(){if(100===o.alpha)switch(o.originalFormat){case"hex":o.model=o.hex;break;case"hsl":o.model="hsl("+o.hsl.h+","+o.hsl.s+"%,"+o.hsl.l+"%)";break;case"rgb":o.model="rgb("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+")"}else"hsl"===o.originalFormat?o.model="hsla("+o.hsl.h+","+o.hsl.s+"%,"+o.hsl.l+"%,"+o.alpha/100+")":o.model="rgba("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+","+o.alpha/100+")";-1===o.previousColors.indexOf(o.model)&&(o.previousColors.unshift(o.model),o.previousColors.length>20&&(o.previousColors.length=20),localStorage.aCKolorPreviousColors=angular.toJson(o.previousColors)),o.toggleCKoloring()},previousColorClick:function(l){var r=(o.originalFormat,o.convertTo(l));r&&(o.hsl.h=o.inputHsl.h=r.h,o.hsl.s=o.inputHsl.s=r.s,o.hsl.l=o.inputHsl.l=r.l,o.rgb=o.hslToRgb(r),o.hex=o.rgbToHex(o.rgb),o.display=o.originalFormat),o.updateHSL()},toggleCKoloring:function(){o.ckoloring=!1},updateColorDisplay:function(l){return o.display=l},updateHSL:function(){o.hex=o.rgbToHex(o.hslToRgb(o.hsl)),o.rgb=o.hslToRgb(o.hsl),o.inputHsl=o.hsl},updateRGB:function(){o.hex=o.rgbToHex(o.rgb),o.hsl=o.rgbToHsl(o.rgb)},updateHEX:function(){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o.hex);o.hex&&7==o.hex.length&&l&&(o.rgb=o.hexToRgb(o.hex),o.hsl=o.rgbToHsl(o.rgb))},hueLightFromRadial:function(l){var r=l.target.getBoundingClientRect(),a=r.width/2,e=r.left,t=r.top,n=a+e,i=a+t,s=l.pageX-n,c=l.pageY-i,u=Math.atan2(c,s)*(180/Math.PI),d=u;0>d&&(d+=360);var h=Math.sqrt(a*a+a*a)-18,p=a/h,g=Math.round(Math.sqrt(s*s+c*c)*p);return o.hsl.l=Math.round(100-g)>-1?Math.round(100-g):0,o.hsl.h=Math.round(d)>-1||Math.round(d)<360?Math.round(d):0,o.updateHSL(),o.radialXY(),{h:o.hsl.h,l:o.hsl.l}},radialXY:function(){var l=o.circleWidth/2,r=l*((100-o.hsl.l)/100),a=o.hsl.h,e=l+r*Math.cos(a*Math.PI/180),t=2*l-(l+-(r*Math.sin(a*Math.PI/180)));return{x:e,y:t}},convertTo:function(l){if(l=l?l:o.model?o.model:"null",l.indexOf("#")>-1){var r=o.hexToRgb(l);return o.originalFormat="hex",o.rgbToHsl(r)}if(l.indexOf("hsla")>-1)return l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="hsl",o.alpha=100*l[3],{h:parseInt(l[0]),s:parseInt(l[1]),l:parseInt(l[2])};if(l.indexOf("hsl")>-1)return l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="hsl",{h:parseInt(l[0]),s:parseInt(l[1]),l:parseInt(l[2])};if(l.indexOf("rgba")>-1)return l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="rgb",o.alpha=100*l[3],o.rgbToHsl({r:parseInt(l[0]),g:parseInt(l[1]),b:parseInt(l[2])});if(l.indexOf("rgb")>-1)return l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="rgb",o.rgbToHsl({r:parseInt(l[0]),g:parseInt(l[1]),b:parseInt(l[2])});if(l.indexOf("transparent")>-1){o.originalFormat="rgb",o.alpha=0;var r=o.hexToRgb(o.defaultColor);return o.rgbToHsl(r)}o.originalFormat="rgb";var r=o.hexToRgb(o.defaultColor);return o.rgbToHsl(r)},hexToRgb:function(o){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},rgbToHsl:function(l){var r=l.r,a=l.g,e=l.b;r/=255,a/=255,e/=255;var t,n,i=Math.max(r,a,e),s=Math.min(r,a,e),c=(i+s)/2;if(i==s)t=n=0;else{var u=i-s;switch(n=c>.5?u/(2-i-s):u/(i+s),i){case r:t=(a-e)/u+(e>a?6:0);break;case a:t=(e-r)/u+2;break;case e:t=(r-a)/u+4}t/=6}return(0==t||isNaN(t))&&(t=o.hsl.h),{h:Math.round(360*t*100)/100,s:Math.round(100*n*100)/100,l:Math.round(100*c*100)/100}},hslToRgb:function(o){var l,r,a,e,t,n,i=o.h,s=o.s,c=o.l;return isFinite(i)||(i=0),isFinite(s)||(s=0),isFinite(c)||(c=0),i/=60,0>i&&(i=6- -i%6),i%=6,s=Math.max(0,Math.min(1,s/100)),c=Math.max(0,Math.min(1,c/100)),t=(1-Math.abs(2*c-1))*s,n=t*(1-Math.abs(i%2-1)),1>i?(l=t,r=n,a=0):2>i?(l=n,r=t,a=0):3>i?(l=0,r=t,a=n):4>i?(l=0,r=n,a=t):5>i?(l=n,r=0,a=t):(l=t,r=0,a=n),e=c-t/2,l=Math.round(255*(l+e)),r=Math.round(255*(r+e)),a=Math.round(255*(a+e)),{r:l,g:r,b:a}},intToHex:function(o){var l=parseInt(o).toString(16);return l.length<2?"0"+l:l},rgbToHex:function(l){return"#"+o.intToHex(l.r)+o.intToHex(l.g)+o.intToHex(l.b)}};return o})}(angular.module("aCKolor",[])),function(o){o.directive("aCkolor",["$document","CKolorFactory",function(o,l){return{restrict:"E",scope:{elementId:"=",inputId:"=",model:"=",name:"=",type:"=",defaultColor:"="},template:'<div class=c-ckolor__wrapper id={{elementId}}><div class=c-ckolor__input-wrapper is-ckoloring={{CKolorFactory.ckoloring}} ng-click=toggleCKoloring()><input ng-if="type && model" type={{type}} name={{name}} id={{inputId}} ng-model=model> <span style="background-color: {{model}};" class=c-ckolor__swatch></span> <span ng-bind=model></span></div></div>',link:function(r,a,e){var t=function(){for(var o="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;35>r;r++)o+=l.charAt(Math.floor(Math.random()*l.length));return o},n=o[0].body,i=function(l){angular.element(o[0].querySelectorAll(".c-ckolor__overlay-blur")).removeClass("c-ckolor__overlay-blur")},s=function(o){for(var l=o.parentNode,r=l.children,a=r.length;a--;)r[a].className=r[a]!==o?r[a].className+" c-ckolor__overlay-blur":r[a].className;return l.parentNode&&l.parentNode!==n?s(l):!1},c=t();r.CKolorFactory=l,r.type||(r.type="hidden"),r.toggleCKoloring=function(o){i(),s(a[0]),l.init({model:r.model,modelId:c,defaultColor:r.defaultColor}),l.ckoloring=!0},r.$watch(function(){return l.model},function(o,a){if(o!==a&&l.modelId===c&&o!==r.model)switch(i(),l.originalFormat){case"hex":var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(l.model);e&&(r.model=l.model);break;case"rgb":try{for(var t=l.model.split("(")[1].split(")")[0].split(","),e=!0,n=0;n<t.length;n++)t[n]=parseInt(t[n]),(isNaN(t[n])||t[n]>255||t[n]<0)&&(e=!1);e&&(r.model=l.model)}catch(s){}break;case"hsl":try{for(var t=l.model.split("(")[1].split(")")[0].split(","),e=!0,n=0;n<t.length;n++)t[n]=parseInt(t[n]),0===n?(isNaN(t[n])||t[n]>360||t[n]<0)&&(e=!1):(isNaN(t[n])||t[n]>100||t[n]<0)&&(e=!1);e&&(r.model=l.model)}catch(s){}}}),r.$watch(function(){return l.ckoloring},function(o,r){l.ckoloring===!1&&l.modelId===c&&i()})}}}])}(angular.module("aCKolor")),function(o){o.directive("aCkolorWheel",["$timeout","$document","CKolorFactory",function(o,l,r){return{restrict:"E",template:'<div class=c-ckolor__overlay ng-show=CKolorFactory.ckoloring><div class=c-ckolor__overlay-inner><div class=c-ckolor__wheel><div class=c-ckolor__wheel-colors><div ng-repeat="hue in CKolorFactory.hues track by $index" class=c-ckolor__wheel-color><div class=c-ckolor__wheel-color-inner1><div class=c-ckolor__wheel-color-inner2 style="background-color: hsl( {{hue}}, {{CKolorFactory.hsl.s}}%, 50% );"></div></div></div></div><div class=c-ckolor__wheel-value ng-click=CKolorFactory.hueLightFromRadial($event)><span class=c-ckolor__wheel-scoop style="background: hsl({{CKolorFactory.hsl.h}}, {{CKolorFactory.hsl.s}}%, {{CKolorFactory.hsl.l}}%); left: {{CKolorFactory.radialXY().x}}px; top: {{CKolorFactory.radialXY().y}}px;"></span></div></div><div class=c-ckolor__input-row><div class=c-ckolor__saturation style="background: linear-gradient(to right, hsl( {{CKolorFactory.hsl.h}}, 0%, {{CKolorFactory.hsl.l}}% ) 0%, hsl({{CKolorFactory.hsl.h}}, 100%, {{CKolorFactory.hsl.l}}% ) 100%);"><div class=c-ckolor__saturation-handle style="left: {{CKolorFactory.hsl.s}}%"></div></div></div><div class="c-ckolor__input-row c-ckolor__alpha-wrapper"><div class=c-ckolor__alpha style="background: linear-gradient(to right, rgba( {{CKolorFactory.rgb.r}}, {{CKolorFactory.rgb.g}}, {{CKolorFactory.rgb.b}}, 0 ) 0%, rgba( {{CKolorFactory.rgb.r}}, {{CKolorFactory.rgb.g}}, {{CKolorFactory.rgb.b}}, 1 ) 100%);"><div class=c-ckolor__alpha-handle style="left: {{CKolorFactory.alpha}}%"></div></div></div><div class=c-ckolor__input-row><div class=c-ckolor__swatch><span style="background: hsla({{CKolorFactory.hsl.h}}, {{CKolorFactory.hsl.s}}%, {{CKolorFactory.hsl.l}}%, {{CKolorFactory.alpha / 100}});"></span></div><div class="c-ckolor__input-wrapper dropdown"><div ng-bind=CKolorFactory.display></div><ul><li ng-click="CKolorFactory.updateColorDisplay(\'hex\')">Hex</li><li ng-click="CKolorFactory.updateColorDisplay(\'rgb\')">RGB</li><li ng-click="CKolorFactory.updateColorDisplay(\'hsl\')">HSL</li></ul></div><div ng-if="CKolorFactory.display === \'hsl\'" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.inputHsl.h min=0 max=360></div><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.inputHsl.s min=0 max=100></div><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.inputHsl.l min=0 max=100></div><div class="c-ckolor__input-wrapper smaller" ng-if="CKolorFactory.alpha !== 100"><input type=number ng-model=CKolorFactory.alpha min=0 max=100></div></div><div ng-if="CKolorFactory.display === \'rgb\'" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.rgb.r ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.rgb.g ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper ng-class="CKolorFactory.alpha === 100 ? \'\' : \'smaller\'"><input type=number ng-model=CKolorFactory.rgb.b ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class="c-ckolor__input-wrapper smaller" ng-if="CKolorFactory.alpha !== 100"><input type=number ng-model=CKolorFactory.alpha min=0 max=100></div></div><div ng-if="CKolorFactory.display === \'hex\'" class=c-ckolor__overlay-inputs><div class="c-ckolor__input-wrapper hex"><input type=text ng-model=CKolorFactory.hex ng-change=CKolorFactory.updateHEX()></div></div><div class="c-ckolor__input-wrapper button"><button class=c-ckolor__save-btn ng-click=CKolorFactory.save()><i class="fa fa-check"></i></button></div><div class="c-ckolor__input-wrapper button"><button class=c-ckolor__close-btn ng-click=CKolorFactory.toggleCKoloring()><i class="fa fa-times"></i></button></div></div><div class=c-ckolor_previous-color-container ng-if=CKolorFactory.previousColors.length><div ng-repeat="previous in CKolorFactory.previousColors track by $index" class=c-ckolor_previous-swatch style=background:{{previous}}; ng-click=CKolorFactory.previousColorClick(previous)></div></div></div></div>',link:function(a,e,t){a.CKolorFactory=r;var n=l[0].body,i=(e[0].querySelector(".c-ckolor__input"),e[0].querySelector(".c-ckolor__wheel-value")),s=(e[0].querySelector(".c-ckolor__wheel-scoop"),e[0].querySelector(".c-ckolor__close-btn"),e[0].querySelector(".c-ckolor__save-btn"),e[0].querySelector(".c-ckolor__saturation")),c=(e[0].querySelector(".c-ckolor__saturation-handle"),e[0].querySelector(".c-ckolor__alpha")),u=(e[0].querySelector(".c-ckolor__alpha-handle"),null),d=null,h=null,p=function(l){o(function(){r.hueLightFromRadial(l)})},g=function(l){var a=l.pageX-d.left;r.hsl.s=Math.round(a/d.width*100),o(function(){r.updateHSL()})},v=function(l){var a=l.pageX-h.left;r.alpha=Math.round(a/h.width*100),o(function(){r.updateHSL()})},m=function(o){i.removeEventListener("mousemove",p,!0),s.removeEventListener("mousemove",g,!0),c.removeEventListener("mousemove",v,!0),n.removeEventListener("mouseup",m,!0)},y=function(o){u=i.getBoundingClientRect(),p(o),i.addEventListener("mousemove",p,!0),n.addEventListener("mouseup",m,!0)},b=function(o){d=s.getBoundingClientRect(),g(o),s.addEventListener("mousemove",g,!0),n.addEventListener("mouseup",m,!0)},C=function(o){h=c.getBoundingClientRect(),v(o),c.addEventListener("mousemove",v,!0),n.addEventListener("mouseup",m,!0)};i.addEventListener("mousedown",y,!0),s.addEventListener("mousedown",b,!0),c.addEventListener("mousedown",C,!0),r.circleWidth=i.offsetWidth,a.$watchCollection(function(){return r.hls},function(o,l){o!==l&&!isNaN(o.h)&&!isNaN(o.l)&&!isNaN(o.s)&&o.h>=0&&o.h<=360&&o.l>=0&&o.l<=255&&o.s>=0&&o.s<=255&&r.updateHSL()})}}}])}(angular.module("aCKolor"));
//# sourceMappingURL=app.min.js.map