!function(o){o.factory("CKolorFactory",function(){var o={ckoloring:!1,display:"hex",inputHsl:{h:null,s:null,l:null},hex:null,hsl:{h:null,s:null,l:null},hues:[105,135,165,195,225,255,285,315,345,15,45,75],model:null,modelId:null,originalFormat:null,rgb:{r:null,g:null,b:null},circleWidth:0,init:function(l){o.model=l.model,o.modelId=l.modelId;var r=o.convertTo();r&&(o.hsl.h=o.inputHsl.h=r.h,o.hsl.s=o.inputHsl.s=r.s,o.hsl.l=o.inputHsl.l=r.l,o.rgb=o.hslToRgb(r),o.hex=o.rgbToHex(o.rgb),o.display=o.originalFormat)},save:function(){switch(o.originalFormat){case"hex":o.model=o.hex;break;case"hsl":o.model="hsl("+o.hsl.h+","+o.hsl.s+"%,"+o.hsl.l+"%)";break;case"rgb":o.model="rgb("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+")"}o.toggleCKoloring()},toggleCKoloring:function(){o.ckoloring=!1},updateColorDisplay:function(l){return o.display=l},updateHSL:function(){o.hex=o.rgbToHex(o.hslToRgb(o.hsl)),o.rgb=o.hslToRgb(o.hsl),o.inputHsl=o.hsl},updateRGB:function(){o.hex=o.rgbToHex(o.rgb),o.hsl=o.rgbToHsl(o.rgb)},updateHEX:function(){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o.hex);o.hex&&7==o.hex.length&&l&&(o.rgb=o.hexToRgb(o.hex),o.hsl=o.rgbToHsl(o.rgb))},hueLightFromRadial:function(l){var r=l.target.getBoundingClientRect(),e=r.width/2,t=r.left,n=r.top,a=e+t,i=e+n,c=l.pageX-a,s=l.pageY-i,d=Math.atan2(s,c)*(180/Math.PI),u=d;0>u&&(u+=360);var h=Math.sqrt(e*e+e*e)-18,p=e/h,g=Math.round(Math.sqrt(c*c+s*s)*p);return o.hsl.l=Math.round(100-g)>-1?Math.round(100-g):0,o.hsl.h=Math.round(u)>-1||Math.round(u)<360?Math.round(u):0,o.updateHSL(),o.radialXY(),{h:o.hsl.h,l:o.hsl.l}},radialXY:function(){var l=o.circleWidth/2,r=l*((100-o.hsl.l)/100),e=o.hsl.h,t=l+r*Math.cos(e*Math.PI/180),n=2*l-(l+-(r*Math.sin(e*Math.PI/180)));return{x:t,y:n}},convertTo:function(l){if(l=l?l:o.model,l.indexOf("#")>-1){var r=o.hexToRgb(l);return o.originalFormat="hex",o.rgbToHsl(r)}return l.indexOf("hsl")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="hsl",{h:parseInt(l[0]),s:parseInt(l[1]),l:parseInt(l[2])}):l.indexOf("rgb")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="rgb",o.rgbToHsl({r:parseInt(l[0]),g:parseInt(l[1]),b:parseInt(l[2])})):!1},hexToRgb:function(o){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},rgbToHsl:function(l){var r=l.r,e=l.g,t=l.b;r/=255,e/=255,t/=255;var n,a,i=Math.max(r,e,t),c=Math.min(r,e,t),s=(i+c)/2;if(i==c)n=a=0;else{var d=i-c;switch(a=s>.5?d/(2-i-c):d/(i+c),i){case r:n=(e-t)/d+(t>e?6:0);break;case e:n=(t-r)/d+2;break;case t:n=(r-e)/d+4}n/=6}return(0==n||isNaN(n))&&(n=o.hsl.h),{h:Math.round(360*n*100)/100,s:Math.round(100*a*100)/100,l:Math.round(100*s*100)/100}},hslToRgb:function(o){var l,r,e,t,n,a,i=o.h,c=o.s,s=o.l;return isFinite(i)||(i=0),isFinite(c)||(c=0),isFinite(s)||(s=0),i/=60,0>i&&(i=6- -i%6),i%=6,c=Math.max(0,Math.min(1,c/100)),s=Math.max(0,Math.min(1,s/100)),n=(1-Math.abs(2*s-1))*c,a=n*(1-Math.abs(i%2-1)),1>i?(l=n,r=a,e=0):2>i?(l=a,r=n,e=0):3>i?(l=0,r=n,e=a):4>i?(l=0,r=a,e=n):5>i?(l=a,r=0,e=n):(l=n,r=0,e=a),t=s-n/2,l=Math.round(255*(l+t)),r=Math.round(255*(r+t)),e=Math.round(255*(e+t)),{r:l,g:r,b:e}},intToHex:function(o){var l=parseInt(o).toString(16);return l.length<2?"0"+l:l},rgbToHex:function(l){return"#"+o.intToHex(l.r)+o.intToHex(l.g)+o.intToHex(l.b)}};return o})}(angular.module("aCKolor",[])),function(o){o.directive("aCkolor",["$document","CKolorFactory",function(o,l){return{restrict:"E",scope:{elementId:"=",inputId:"=",model:"=",name:"=",type:"="},template:'<div class=c-ckolor__wrapper id={{elementId}}><div class=c-ckolor__input-wrapper is-ckoloring={{CKolorFactory.ckoloring}} ng-click=toggleCKoloring()><input ng-if="type && model" type={{type}} name={{name}} id={{inputId}} ng-model=model> <span style="background-color: {{model}};" class=c-ckolor__swatch></span> <span ng-bind=model></span></div></div>',link:function(r,e,t){var n=function(){for(var o="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;35>r;r++)o+=l.charAt(Math.floor(Math.random()*l.length));return o},a=o[0].body,i=function(l){angular.element(o[0].querySelectorAll(".c-ckolor__overlay-blur")).removeClass("c-ckolor__overlay-blur")},c=function(o){for(var l=o.parentNode,r=l.children,e=r.length;e--;)r[e].className=r[e]!==o?r[e].className+" c-ckolor__overlay-blur":r[e].className;return l.parentNode&&l.parentNode!==a?c(l):!1},s=n();r.CKolorFactory=l,r.type||(r.type="hidden"),r.toggleCKoloring=function(o){i(),c(e[0]),l.init({model:r.model,modelId:s}),l.ckoloring=!0},r.$watch(function(){return l.model},function(o,e){if(o!==e&&l.modelId===s&&o!==r.model)switch(i(),l.originalFormat){case"hex":var t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(l.model);t&&(r.model=l.model);break;case"rgb":try{for(var n=l.model.split("(")[1].split(")")[0].split(","),t=!0,a=0;a<n.length;a++)n[a]=parseInt(n[a]),(isNaN(n[a])||n[a]>255||n[a]<0)&&(t=!1);t&&(r.model=l.model)}catch(c){}break;case"hsl":try{for(var n=l.model.split("(")[1].split(")")[0].split(","),t=!0,a=0;a<n.length;a++)n[a]=parseInt(n[a]),0===a?(isNaN(n[a])||n[a]>360||n[a]<0)&&(t=!1):(isNaN(n[a])||n[a]>100||n[a]<0)&&(t=!1);t&&(r.model=l.model)}catch(c){}}}),r.$watch(function(){return l.ckoloring},function(o,r){l.ckoloring===!1&&l.modelId===s&&i()})}}}])}(angular.module("aCKolor")),function(o){o.directive("aCkolorWheel",["$timeout","$document","CKolorFactory",function(o,l,r){return{restrict:"E",template:'<div class=c-ckolor__overlay ng-show=CKolorFactory.ckoloring><div class=c-ckolor__overlay-inner><div class=c-ckolor__wheel><div class=c-ckolor__wheel-colors><div ng-repeat="hue in CKolorFactory.hues track by $index" class=c-ckolor__wheel-color><div class=c-ckolor__wheel-color-inner1><div class=c-ckolor__wheel-color-inner2 style="background-color: hsl( {{hue}}, {{CKolorFactory.hsl.s}}%, 50% );"></div></div></div></div><div class=c-ckolor__wheel-value ng-click=CKolorFactory.hueLightFromRadial($event)><span class=c-ckolor__wheel-scoop style="background: hsl({{CKolorFactory.hsl.h}}, {{CKolorFactory.hsl.s}}%, {{CKolorFactory.hsl.l}}%); left: {{CKolorFactory.radialXY().x}}px; top: {{CKolorFactory.radialXY().y}}px;"></span></div></div><div class=c-ckolor__input-row><div class=c-ckolor__saturation style="background: linear-gradient(to right, hsl( {{CKolorFactory.hsl.h}}, 0%, {{CKolorFactory.hsl.l}}% ) 0%, hsl({{CKolorFactory.hsl.h}}, 100%, {{CKolorFactory.hsl.l}}% ) 100%);"><div class=c-ckolor__saturation-handle style="left: {{CKolorFactory.hsl.s}}%"></div></div></div><div class=c-ckolor__input-row><div class=c-ckolor__swatch><span style="background: hsl({{CKolorFactory.hsl.h}}, {{CKolorFactory.hsl.s}}%, {{CKolorFactory.hsl.l}}%);"></span></div><div class="c-ckolor__input-wrapper dropdown"><div ng-bind=CKolorFactory.display></div><ul><li ng-click="CKolorFactory.updateColorDisplay(\'hex\')">Hex</li><li ng-click="CKolorFactory.updateColorDisplay(\'rgb\')">RGB</li><li ng-click="CKolorFactory.updateColorDisplay(\'hsl\')">HSL</li></ul></div><div ng-if="CKolorFactory.display === \'hsl\'" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.inputHsl.h min=0 max=360></div><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.inputHsl.s min=0 max=100></div><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.inputHsl.l min=0 max=100></div></div><div ng-if="CKolorFactory.display === \'rgb\'" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.rgb.r ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.rgb.g ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper><input type=number ng-model=CKolorFactory.rgb.b ng-change=CKolorFactory.updateRGB() min=0 max=255></div></div><div ng-if="CKolorFactory.display === \'hex\'" class=c-ckolor__overlay-inputs><div class="c-ckolor__input-wrapper hex"><input type=text ng-model=CKolorFactory.hex ng-change=CKolorFactory.updateHEX()></div></div><div class="c-ckolor__input-wrapper button"><button class=c-ckolor__save-btn ng-click=CKolorFactory.save()><i class="fa fa-check"></i></button></div><div class="c-ckolor__input-wrapper button"><button class=c-ckolor__close-btn ng-click=CKolorFactory.toggleCKoloring()><i class="fa fa-times"></i></button></div></div></div></div>',link:function(e,t,n){e.CKolorFactory=r;var a=l[0].body,i=(t[0].querySelector(".c-ckolor__input"),t[0].querySelector(".c-ckolor__wheel-value")),c=(t[0].querySelector(".c-ckolor__wheel-scoop"),t[0].querySelector(".c-ckolor__close-btn"),t[0].querySelector(".c-ckolor__save-btn"),t[0].querySelector(".c-ckolor__saturation")),s=(t[0].querySelector(".c-ckolor__saturation-handle"),null),d=null,u=function(l){o(function(){r.hueLightFromRadial(l)})},h=function(l){var e=l.pageX-d.left;r.hsl.s=Math.round(e/d.width*100),o(function(){r.updateHSL()})},p=function(o){i.removeEventListener("mousemove",u,!0),c.removeEventListener("mousemove",h,!0),a.removeEventListener("mouseup",p,!0)},g=function(o){s=i.getBoundingClientRect(),u(o),i.addEventListener("mousemove",u,!0),a.addEventListener("mouseup",p,!0)},v=function(o){d=c.getBoundingClientRect(),h(o),c.addEventListener("mousemove",h,!0),a.addEventListener("mouseup",p,!0)};i.addEventListener("mousedown",g,!0),c.addEventListener("mousedown",v,!0),r.circleWidth=i.offsetWidth,e.$watchCollection(function(){return r.hls},function(o,l){o!==l&&!isNaN(o.h)&&!isNaN(o.l)&&!isNaN(o.s)&&o.h>=0&&o.h<=360&&o.l>=0&&o.l<=255&&o.s>=0&&o.s<=255&&r.updateHSL()})}}}])}(angular.module("aCKolor"));
//# sourceMappingURL=app.min.js.map