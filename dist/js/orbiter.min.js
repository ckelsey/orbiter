!function(){"use strict";function e(){}angular.module("app",["ngResource","ngSanitize","ngRoute","ngAnimate","ngStorage","aCKolor"]).controller("AppCtlr",e)}(),function(){"use strict";function e(e){this.InteractiveService=e,this.debug=function(e){console.log(e)}}e.$inject=["InteractiveService"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{title:"",template:'<div ng-controller="InteractiveCtlr as ictlr" class=m-height100><div ng-repeat="data in ictlr.InteractiveService.htmlTree.nodes track by $index" interactive-node=data interactive-node-parent=ictlr.InteractiveService.htmlTree ng-init="path = $index" interactive-node-parent-path=path class=c-interactive_wrapper></div></div>',controller:"InteractiveCtlr",model:"app"})}]).controller("InteractiveCtlr",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"A",scope:{data:"=interactiveNode",parent:"=interactiveNodeParent",parentPath:"=interactiveNodeParentPath"},template:'<script type=text/ng-template id=/node-child.html><div ng-repeat="childData in data.nodes track by $index" interactive-node="childData" interactive-node-parent="data" ng-init="thisPath=parentPath + \',nodes,\' + $index" interactive-node-parent-path="thisPath" path="{{thisPath}}" ng-style="ictlr.InteractiveService.getStyles(childData, \'display\')" ng-class="childData.active? \'m-active-iteractive-node\' : \'\'" ></div></script><div ng-if="data.label === \'Block\'" ng-controller="InteractiveCtlr as ictlr" ng-style=ictlr.InteractiveService.getStyles(data) interactive-id={{data.id}}><div ng-include src="\'/node-child.html\'" ng-style=ictlr.InteractiveService.getStyles(data)></div></div><div ng-if="data.label === \'Text\'" ng-controller="InteractiveCtlr as ictlr" ng-style=ictlr.InteractiveService.getStyles(data) interactive-id={{data.id}}><span ng-bind-html=data.properties.text.value></span><div ng-include src="\'/node-child.html\'" ng-style=ictlr.InteractiveService.getStyles(data)></div></div><a ng-if="data.label === \'Link\'" ng-controller="InteractiveCtlr as ictlr" ng-style=ictlr.InteractiveService.getStyles(data) interactive-id={{data.id}} href={{data.properties.url.value}}><span ng-bind-html=data.properties.text.value></span><div ng-include src="\'/node-child.html\'" ng-style=ictlr.InteractiveService.getStyles(data)></div></a> <button ng-if="data.label === \'Button\'" ng-controller="InteractiveCtlr as ictlr" ng-style=ictlr.InteractiveService.getStyles(data) interactive-id={{data.id}} href={{data.properties.url.value}}><span ng-bind-html=data.properties.text.value></span><div ng-include src="\'/node-child.html\'" ng-style=ictlr.InteractiveService.getStyles(data)></div></button>',link:function(n,i,a){function l(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return i.attr("id",o),e}var o=a.id||l();i.bind("dragover",function(t){t.preventDefault(),i.addClass(a.orbiterAcceptDrop?e.canAccept(a.orbiterAcceptDrop):e.canAcceptDragClass)}),i.bind("dragleave",function(t){i.removeClass(e.canAcceptDragClass)}),i.bind("drop",function(i){return i.preventDefault(),i.stopPropagation(),r(function(){angular.element(document.querySelectorAll("."+e.canAcceptDragClass)).removeClass(e.canAcceptDragClass),t.addToInteractive(n.data,t.dragging)}),!1}),i.bind("click",function(i){e.developer&&i.preventDefault(),i.stopPropagation(),r(function(){t.activeProperties(n.data)})})}}}e.$inject=["InteractiveService","OrbiterService","$timeout"],angular.module("app").directive("interactiveNode",e)}(),function(){"use strict";function e(e,t){var r={developer:!1,htmlTree:{nodes:[{id:"_root_",label:"Block",properties:{display:{type:"select",options:["block","inline"],value:"block"}},tag:{block:"p",inline:"span"},nodes:[]}]},dragging:null,canAcceptDragClass:"c-drag_can-accept",canAccept:function(e){try{e=JSON.parse(e)}catch(t){}return e&&"object"==typeof e&&r.dragging&&!e.length?r.canAcceptDragClass:void 0},getStyles:function(t,r){if(t&&t.hasOwnProperty("properties")){var n=t.properties,i={},a=function(t){var r=t,a=n[t].value;e.hasOwnProperty(t)&&(r=e[t].ruleName,e[t].hasOwnProperty("transform")&&e[t].transform.hasOwnProperty(a)&&(a=e[t].transform[a]),e[t].hasOwnProperty("append")&&(a+=e[t].append)),"null"!==a&&(i[r]=a)};if(r)n.hasOwnProperty(r)&&n[r].value&&a(r);else for(var l in n)a(l);return i}return!1}};return t.hasOwnProperty("OrbiterInteractive")&&t.OrbiterInteractive&&t.OrbiterInteractive.hasOwnProperty("htmlTree")&&(r.htmlTree=t.OrbiterInteractive.htmlTree),r}e.$inject=["InteractiveStyles","$localStorage"],angular.module("app").service("InteractiveService",e)}(),function(){"use strict";function e(){return{display:{ruleName:"display",transform:{inline:"inline-block"}}}}angular.module("app").service("InteractiveStyles",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb" ng-include="\'src/html/interactive/main.html\'" class=c-interactive_includer></div>'}}angular.module("app").directive("orbiterCanvas",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{orbiterDragData:"=orbiterDragData"},link:function(t,r,n){function i(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}r.attr("draggable","true");var a=n.id;a||(a=i(),r.attr("id",a)),r.bind("dragstart",function(r){e.drag(angular.copy(t.orbiterDragData))}),r.bind("dragend",function(t){e.drag(null)})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDraggable",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(r,n,i){function a(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var l=i.id;l||(l=a(),n.attr("id",l)),n.bind("dragover",function(e){e.preventDefault(),n.addClass(i.orbiterDroppable?t.canAccept(i.orbiterDroppable):t.canAcceptDragClass)}),n.bind("dragleave",function(e){n.removeClass(t.canAcceptDragClass)}),n.bind("drop",function(i){i.preventDefault();var a=e.dragging;return n.removeClass(t.canAcceptDragClass),console.log(r,a),!1})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDroppable",e)}(),function(){"use strict";function e(){var e={text:{type:"textarea",value:"Text"},color:{type:"color",value:"#30363B"},"font-size":{type:"select",options:["3px","5px","7px","8px","9px","10px","11px","12px","13px","14px","15px","16px","17px","18px","19px","20px","22px","24px","28px","32px"],value:null},"font-weight":{type:"select",options:["light","normal","bold"],value:null},display:{type:"select",options:["block","inline"],value:"inline"},"text-align":{type:"select",options:["left","center","right"],value:null}},t=angular.copy(e);t.url={type:"text",value:null};var r=angular.copy(e);return r["background-color"]={type:"color",value:"#68BCD8"},{block:{label:"Block",properties:{display:{type:"select",options:["block","inline"],value:"inline"}},tag:{block:"p",inline:"span"}},text:{label:"Text",properties:e},link:{label:"Link",properties:t},button:{label:"Button",properties:r},list:{label:"List"},filter:{label:"Filter"},media:{label:"Media"}}}angular.module("app").service("OrbiterElementTypes",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb"><div class=c-elements_elements><h4>Elements</h4><div class=c-elements_item ng-repeat="element in orb.OrbiterElementTypes track by $index" orbiter-draggable=true orbiter-drag-data=element><span ng-bind=element.label></span></div></div><div class=c-elements_properties><h4>Properties</h4><div ng-if=orb.OrbiterService.elementProperties><div ng-repeat="(propertyKey, property) in orb.OrbiterService.elementProperties.properties track by $index" class=c-elements_property><label ng-bind=propertyKey></label><select ng-if="property.type === \'select\'" ng-model=property.value><option ng-repeat="option in property.options track by $index" value={{option}} ng-bind=option></option></select><a-ckolor ng-if="property.type === \'color\'" model=property.value element-id="\'an_id\'" input-id="\'an_input_id\'" name="\'an-input-name\'" type="\'hidden\'"></a-ckolor><input ng-if="property.type === \'text\'" type=text ng-model=property.value> <textarea ng-if="property.type === \'textarea\'" ng-model=property.value></textarea></div></div></div></div>'}}angular.module("app").directive("orbiterElements",e)}(),function(){"use strict";function e(e,t,r){e.developer=!0;var n={dragging:null,drag:function(t){n.dragging=t,e.dragging=t},addToInteractive:function(e,t){var r=t;r.nodes=[],r.id=t.label+"_"+(new Date).getTime(),n.elementProperties&&(n.elementProperties.active=!1),e.id!==r.id&&(r.active=!0,n.elementProperties=r,e.nodes.push(t))},elementProperties:null,activeProperties:function(e){console.log(e),n.elementProperties&&(n.elementProperties.active=!1),e.active=!0,n.elementProperties=e},save:function(){r.OrbiterInteractive||(r.OrbiterInteractive={}),console.log(r),r.OrbiterInteractive.htmlTree=e.htmlTree}};return n}e.$inject=["InteractiveService","OrbiterElementTypes","$localStorage"],angular.module("app").service("OrbiterService",e)}(),function(){"use strict";function e(e,t,r,n,i){var a=this;this.$localStorage=e,e.Orbiter||(e.Orbiter={}),this.OrbiterService=r,this.OrbiterElementTypes=n,this.InteractiveService=i,this.trackingMouseMove=!1,this.mouseMoveMethod=null,this.sizingElement=null,this.canvasElements=function(e){for(var r=a.sizingElement[0],n=1;n<a.sizingElement.length;n++)r=r[a.sizingElement[n]];var i=e.pageX-r.getBoundingClientRect().left;0>i&&(i=0),a.$localStorage.Orbiter.elementsWidth=(t.innerWidth-i)/t.innerWidth*100+"%",a.$localStorage.Orbiter.canvasWidth=i/t.innerWidth*100+"%"},this.draggingElement=function(e,t){console.log(e,t)},this.debug=function(e){return console.log(e),e}}e.$inject=["$localStorage","$window","OrbiterService","OrbiterElementTypes","InteractiveService"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/_",{title:"Orbiter",template:'<div ng-controller="OrbiterCtlr as orb" class=m-height100 ng-mouseup="orb.trackingMouseMove = false" ng-mouseleave="orb.trackingMouseMove = false" ng-mousemove="orb.trackingMouseMove ? orb.mouseMoveMethod($event) : null" ng-class="orb.trackingMouseMove ? \'c-tracking-mousemove blur-\'+orb.dialogueOpen : \'c-ckrank_main blur-\'+orb.dialogueOpen"><div class=c-orbiter_body><div class=c-orbiter_body-inner><orbiter-canvas ng-style="{\'width\':orb.$localStorage.Orbiter.canvasWidth}"></orbiter-canvas><div class="c-section-resize m-horizontal" ng-style="{\'left\':orb.$localStorage.Orbiter.canvasWidth}" ng-mousedown="orb.trackingMouseMove=true; orb.mouseMoveMethod=orb.canvasElements; orb.sizingElement=[$event, \'target\', \'previousSibling\']"></div><orbiter-elements ng-style="{\'left\':orb.$localStorage.Orbiter.canvasWidth, \'width\':orb.$localStorage.Orbiter.elementsWidth}"></orbiter-elements></div></div><div class=c-orbiter_menu><div class=c-orbiter_menu-item ng-click=orb.OrbiterService.save()>Save</div></div></div>',controller:"OrbiterCtlr",model:"app"})}]).controller("OrbiterCtlr",e)}();
//# sourceMappingURL=orbiter.min.js.map