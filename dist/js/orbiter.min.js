!function(){"use strict";function e(){}angular.module("app",["ngResource","ngSanitize","ngRoute","ngAnimate","ngStorage","aCKolor"]).controller("AppCtlr",e)}(),function(){"use strict";function e(e){this.InteractiveService=e,this.debug=function(e){console.log(e)}}e.$inject=["InteractiveService"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{title:"",template:'<div ng-controller="InteractiveCtlr as ictlr" class=m-height100><div ng-repeat="data in ictlr.InteractiveService.htmlTree.nodes track by $index" interactive-node=data interactive-node-parent=ictlr.InteractiveService.htmlTree ng-init="path = $index" interactive-node-parent-path=path class=c-interactive_wrapper></div></div>',controller:"InteractiveCtlr",model:"app"})}]).controller("InteractiveCtlr",e)}(),function(){"use strict";function e(){return{logTestString:{key:"logTestString",label:"Log test string property",arguments:{logme:{keyPath:"properties.testString.value",value:null}},fn:"console.log(logme);"}}}angular.module("app").service("InteractiveMethods",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"A",scope:{interactiveModel:"=interactiveModel"},link:function(t,i,n){i.bind("input",function(n){r(function(){for(var r=t.interactiveModel.element.properties[t.interactiveModel.propertyKey].bind.split("."),n=null,a=0;a<r.length;a++)0===a&&(n=e.properties),n=n[r[a]];n.value=i.val()})})}}}e.$inject=["InteractiveService","OrbiterService","$timeout"],angular.module("app").directive("interactiveModel",e)}(),function(){"use strict";function e(e,t,r,i){return{restrict:"A",scope:{data:"=interactiveNode",parent:"=interactiveNodeParent",parentPath:"=interactiveNodeParentPath"},link:function(n,a,l){var o=n.data,c="";e.getStyles(o);"Block"===o.label||"Text"===o.label?c+="<div ":"Link"===o.label?c+="<a href=\"{{ictlr.InteractiveService.getBinding(data, 'url')}}\" ":"Button"===o.label&&(c+="<button "),c+='ng-controller="InteractiveCtlr as ictlr" ng-style="ictlr.InteractiveService.getStyles(data)',c+='" ';for(var s in o.events)o.events[s].fn&&o.events[s].fn.length&&(c+=o.events[s].method+"=\"ictlr.InteractiveService.runFN(data.events['"+s+"'])\" ");if(c+='interactive-id="'+o.id+'"',c+=">","Text"!==o.label&&"Link"!==o.label&&"Button"!==o.label||(c+='<span ng-bind-html="ictlr.InteractiveService.getBinding(data, \'text\')" class="c-interactive-bound"></span>'),c+='<div ng-repeat="childData in data.nodes track by $index"',c+=' interactive-node="childData"',c+=' interactive-node-parent="data"',c+=" ng-init=\"thisPath=parentPath + ',nodes,' + $index\"",c+=' interactive-node-parent-path="thisPath"',c+=' path="{{thisPath}}"',c+=" ng-style=\"ictlr.InteractiveService.getStyles(childData, 'display')\"",c+=" ng-class=\"childData.id === ictlr.InteractiveService.elementProperties.id ? 'm-active-iteractive-node' : ''\"",c+="></div>","Block"===o.label||"Text"===o.label?c+="</div>":"Link"===o.label?c+="</a>":"Button"===o.label&&(c+="</button>"),a.html(c),i(a.contents())(n),e.developer){var d=angular.element(a[0].firstElementChild);a.bind("dragover",function(t){t.preventDefault(),a.addClass(l.orbiterAcceptDrop?e.canAccept(l.orbiterAcceptDrop):e.canAcceptDragClass)}),a.bind("dragleave",function(t){a.removeClass(e.canAcceptDragClass)}),a.bind("drop",function(i){return i.preventDefault(),i.stopPropagation(),r(function(){angular.element(document.querySelectorAll("."+e.canAcceptDragClass)).removeClass(e.canAcceptDragClass),t.addToInteractive(n.data,t.dragging)}),!1}),a.bind("click",function(e){e.stopPropagation(),r(function(){t.activeProperties(n.data)})}),d.bind("click",function(e){e.preventDefault()})}}}}e.$inject=["InteractiveService","OrbiterService","$timeout","$compile"],angular.module("app").directive("interactiveNode",e)}(),function(){"use strict";function e(){return{testString:{key:"testString",label:"Test string",value:"Hi! This is a testString"}}}angular.module("app").service("InteractiveProperties",e)}(),function(){"use strict";function e(e,t,r,i){var n={developer:!1,elementProperties:null,propertyPrefix:"!@#$%^&*()|",htmlTree:{},properties:{},methods:{},dragging:null,canAcceptDragClass:"c-drag_can-accept",canAccept:function(e){try{e=JSON.parse(e)}catch(t){}return e&&"object"==typeof e&&n.dragging&&!e.length?n.canAcceptDragClass:void 0},getStyles:function(t,r){if(t&&t.hasOwnProperty("properties")){var i=t.properties,a={},l=function(r){if(e.hasOwnProperty(r)){var i=r,l=n.getBinding(t,r);i=e[r].ruleName,e[r].hasOwnProperty("transform")&&e[r].transform.hasOwnProperty(l)&&(l=e[r].transform[l]),e[r].hasOwnProperty("append")&&(l+=e[r].append),l&&"null"!==l&&(a[i]=l)}};if(r)i.hasOwnProperty(r)&&i[r].value&&l(r);else for(var o in i)l(o);return a}return!1},getBinding:function(e,t){if(e.properties[t].bind){for(var r=e.properties[t].bind.split("."),i=null,a=0;a<r.length;a++)0===a&&(i=n.properties),i=i[r[a]];return i&&(i=i.value),i}return null},getModel:function(e){return e.binding&&e.binding.key&&n.properties.hasOwnProperty(e.binding.key)?n.properties[e.binding.key]:e.value},runFN:function(e){if(!n.developer)for(var t=0;t<e.fn.length;t++){var r=e.fn[t];if(r.property)n.properties[r.property.key].value=r.newValue;else if(r.method){var i=n.methods[r.method.key],a=[],l=[];for(var o in i.arguments){l.push(o);for(var c=i.arguments[o].keyPath.split("."),s=n,d=0;d<c.length;d++)s=s[c[d]];a.push(s)}var p=new Function(l,i.fn);p.apply(this,a)}}}};return n}e.$inject=["InteractiveStyles","InteractiveProperties","InteractiveMethods","$localStorage"],angular.module("app").service("InteractiveService",e)}(),function(){"use strict";function e(){return{display:{ruleName:"display",transform:{inline:"inline-block"}},color:{ruleName:"color"},"font-size":{ruleName:"font-size"},size:{ruleName:"font-size"},"font-weight":{ruleName:"font-weight"},weight:{ruleName:"font-weight"},"text-align":{ruleName:"text-align"},align:{ruleName:"text-align"}}}angular.module("app").service("InteractiveStyles",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb" ng-include="\'src/html/interactive/main.html\'" class=c-interactive_includer></div>'}}angular.module("app").directive("orbiterCanvas",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{orbiterDragData:"=orbiterDragData"},link:function(t,r,i){function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}r.attr("draggable","true");var a=i.id;a||(a=n(),r.attr("id",a)),r.bind("dragstart",function(r){e.drag(angular.copy(t.orbiterDragData))}),r.bind("dragend",function(t){e.drag(null)})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDraggable",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(r,i,n){function a(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var l=n.id;l||(l=a(),i.attr("id",l)),i.bind("dragover",function(e){e.preventDefault(),i.addClass(n.orbiterDroppable?t.canAccept(n.orbiterDroppable):t.canAcceptDragClass)}),i.bind("dragleave",function(e){i.removeClass(t.canAcceptDragClass)}),i.bind("drop",function(n){n.preventDefault();var a=e.dragging;return i.removeClass(t.canAcceptDragClass),console.log(r,a),!1})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDroppable",e)}(),function(){"use strict";function e(){var e={text:{type:"textarea",value:"Text",bind:null},color:{type:"color",value:"#30363B",bind:null},"font-size":{type:"select",options:["3px","5px","7px","8px","9px","10px","11px","12px","13px","14px","15px","16px","17px","18px","19px","20px","22px","24px","28px","32px"],value:null,bind:null},"font-weight":{type:"select",options:["light","normal","bold"],value:null,bind:null},display:{type:"select",options:["block","inline"],value:"inline",bind:null},"text-align":{type:"select",options:["left","center","right"],value:null,bind:null}},t=angular.copy(e);t.url={type:"text",value:null,bind:null};var r=angular.copy(e);r["background-color"]={type:"color",value:"#68BCD8",bind:null};var i={click:{label:null,method:"ng-click",fn:[]},"Mouse down":{label:null,method:"ng-mousedown",fn:[]},"Mouse move":{label:null,method:"ng-mousemove",fn:[]}};return{block:{label:"Block",properties:{display:{type:"select",options:["block","inline"],value:"block",bind:null}},events:i},text:{label:"Text",properties:e,events:i},link:{label:"Link",properties:t,events:i},button:{label:"Button",properties:r,events:i}}}angular.module("app").service("OrbiterElementTypes",e)}(),function(){"use strict";function e(e,t,r,i,n){var a={dragging:null,drag:function(t){a.dragging=t,e.dragging=t},addToInteractive:function(t,r){var i=r;if(i.nodes=[],i.id=r.label+"_"+(new Date).getTime(),t.id!==i.id){e.properties[e.propertyPrefix+i.id]={};for(var n in i.properties)i.properties[n].bind=e.propertyPrefix+i.id+"."+n,e.properties[e.propertyPrefix+i.id][n]={value:i.properties[n].value};e.elementProperties=i,t.nodes.push(i)}},elementProperties:null,activeProperties:function(t){e.elementProperties&&(e.elementProperties.active=!1),t.active=!0,e.elementProperties=t},save:function(){n.OrbiterInteractiveTree||(n.OrbiterInteractiveTree={}),n.OrbiterInteractiveProperties||(n.OrbiterInteractiveProperties={}),n.OrbiterInteractiveMethods||(n.OrbiterInteractiveMethods={}),n.OrbiterInteractiveTree=e.htmlTree,n.OrbiterInteractiveProperties=e.properties,n.OrbiterInteractiveMethods=e.methods},newDataObject:null,currentEventObject:null,removeArrayElement:function(e,t){return e.splice(t,1)},propertyDialogue:null,updatedValue:function(e){console.log(e)}};return n.hasOwnProperty("OrbiterInteractiveProperties")&&n.OrbiterInteractiveProperties&&Object.keys(n.OrbiterInteractiveProperties).length>0?e.properties=n.OrbiterInteractiveProperties:(n.OrbiterInteractiveProperties=angular.copy(t),e.properties=n.OrbiterInteractiveProperties),n.hasOwnProperty("OrbiterInteractiveMethods")&&n.OrbiterInteractiveMethods&&Object.keys(n.OrbiterInteractiveMethods).length>0?e.methods=n.OrbiterInteractiveMethods:(n.OrbiterInteractiveMethods=angular.copy(r),e.methods=n.OrbiterInteractiveMethods),n.hasOwnProperty("OrbiterInteractiveTree")&&n.OrbiterInteractiveTree.hasOwnProperty("nodes")&&n.OrbiterInteractiveTree.nodes.length>0?e.htmlTree=n.OrbiterInteractiveTree:(n.OrbiterInteractiveTree={nodes:[]},e.htmlTree=n.OrbiterInteractiveTree,a.addToInteractive(e.htmlTree,i.block)),a}e.$inject=["InteractiveService","InteractiveProperties","InteractiveMethods","OrbiterElementTypes","$localStorage"],angular.module("app").service("OrbiterService",e)}(),function(){"use strict";function e(e,t,r,i,n,a){var l=this;this.$localStorage=e,e.Orbiter||(e.Orbiter={}),this.OrbiterService=r,this.OrbiterElementTypes=i,this.InteractiveService=n,n.developer=!0,this.trackingMouseMove=!1,this.mouseMoveMethod=null,this.sizingElement=null,this.canvasElements=function(e){for(var r=l.sizingElement[0],i=1;i<l.sizingElement.length;i++)r=r[l.sizingElement[i]];var n=e.pageX-r.getBoundingClientRect().left;0>n&&(n=0),l.$localStorage.Orbiter.elementsWidth=(t.innerWidth-n)/t.innerWidth*100+"%",l.$localStorage.Orbiter.canvasWidth=n/t.innerWidth*100+"%"},this.draggingElement=function(e,t){console.log(e,t)},this.debug=function(e){return console.log(e),e},this.dialogueOpen=!1,a.$watch(function(){return l.OrbiterService.newDataObject},function(e,t){e!==t&&(l.OrbiterService.newDataObject?l.dialogueOpen=!0:l.dialogueOpen=!1)}),a.$watch(function(){return l.OrbiterService.propertyDialogue},function(e,t){e!==t&&(l.OrbiterService.propertyDialogue?l.dialogueOpen=!0:l.dialogueOpen=!1)}),a.$watch(function(){return l.OrbiterService.currentEventObject},function(e,t){e!==t&&(l.OrbiterService.currentEventObject?l.dialogueOpen=!0:l.dialogueOpen=!1)})}e.$inject=["$localStorage","$window","OrbiterService","OrbiterElementTypes","InteractiveService","$scope"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/_",{title:"Orbiter",template:'<div ng-controller="OrbiterCtlr as orb" class=m-height100 ng-mouseup="orb.trackingMouseMove = false" ng-mouseleave="orb.trackingMouseMove = false" ng-mousemove="orb.trackingMouseMove ? orb.mouseMoveMethod($event) : null" ng-class="orb.trackingMouseMove ? \'c-tracking-mousemove blur-\'+orb.dialogueOpen : \'c-ckrank_main blur-\'+orb.dialogueOpen"><div class=c-orbiter_body><div class=c-orbiter_body-inner><orbiter-canvas ng-style="{\'width\':orb.$localStorage.Orbiter.canvasWidth}"></orbiter-canvas><div class="c-section-resize m-horizontal" ng-style="{\'left\':orb.$localStorage.Orbiter.canvasWidth}" ng-mousedown="orb.trackingMouseMove=true; orb.mouseMoveMethod=orb.canvasElements; orb.sizingElement=[$event, \'target\', \'previousSibling\']"></div><orbiter-sidebar ng-style="{\'left\':orb.$localStorage.Orbiter.canvasWidth, \'width\':orb.$localStorage.Orbiter.elementsWidth}"></orbiter-sidebar></div></div><div class=c-orbiter_menu><div class=c-orbiter_menu-item ng-click=orb.OrbiterService.save()><i class="fa fa-check"></i></div><div class="c-orbiter_menu-item c-dropdown"><div><i class="fa fa-plus"></i></div><div class=c-dropdown_list><div class=c-elements_item ng-class="\'type\'+element.label" ng-repeat="element in orb.OrbiterElementTypes track by $index" orbiter-draggable=true orbiter-drag-data=element><span ng-bind=element.label></span></div></div></div></div><div ng-if=orb.OrbiterService.newDataObject class=c-dialogue><div class=c-dialogue_inner><h2>Data object</h2><div class=c-dialogue_input><input type=text ng-model=orb.OrbiterService.newDataObject.label placeholder="object name"></div><div class=c-dialogue_input><textarea ng-model=orb.OrbiterService.newDataObject.value></textarea></div><div class=c-dialogue_input style="text-align: right;"><button class=circle ng-click="orb.InteractiveService.dataObjects[orb.OrbiterService.newDataObject.label] = orb.OrbiterService.newDataObject; orb.OrbiterService.newDataObject=null" ng-if=orb.OrbiterService.newDataObject.label>&#10004;</button> <button class=circle ng-click="orb.OrbiterService.newDataObject=null">&#10006;</button></div></div></div><div ng-if=orb.OrbiterService.propertyDialogue class=c-dialogue><div class=c-dialogue_inner><h2>Available properties</h2><div class=c-dialogue_input><div ng-repeat="property in orb.InteractiveService.properties track by $index" ng-click="orb.OrbiterService.propertyDialogue.element.properties[orb.OrbiterService.propertyDialogue.propertyKey].bind = property.key; orb.OrbiterService.propertyDialogue=null;" ng-bind=property.label ng-if=property.label class=c-dialogue_event-property-item></div></div><div class=c-dialogue_input style="text-align: right;"><button class=circle ng-click="orb.OrbiterService.propertyDialogue=null">&#10006;</button></div></div></div><div ng-if=orb.OrbiterService.currentEventObject class=c-dialogue ng-init="eventObj=orb.OrbiterService.currentEventObject"><div class=c-dialogue_inner ng-class=orb.dialogueSidebar ng-init="orb.dialogueSidebar=\'\'; orb.dialogueTaskToAddTo=null"><h2>Functional fun</h2><div class=c-dialogue_left><div class=c-dialogue_input><input type=text ng-model=eventObj.label placeholder="Function description"></div><h4>Tasks&nbsp;&nbsp;<button class=circle ng-click="eventObj.fn.push({label:null, method:null, arguments:[{label:null, custom:true, value:null, valueLabel:null}]});"><i class="fa fa-plus"></i></button></h4><div class="c-dialogue_input tasks" ng-repeat="task in eventObj.fn track by $index"><input type=text ng-model=task.label placeholder="task name"><div class=c-dialogue_input ng-if=task.method><span class=c-task_action-string>Run function <span ng-bind=task.method.label class=c-task_action-target></span></span></div><div class=c-dialogue_input ng-if=task.property><span class=c-task_action-string>Set <span ng-bind=task.property.label class=c-task_action-target></span> to equal <input type=text ng-model=task.newValue></span></div><h4 style="margin: 14px 0px 0px;">Arguments&nbsp;&nbsp;<button class=circle ng-click="task.arguments.push({label:null, custom:true, value:null, valueLabel:null})"><i class="fa fa-plus"></i></button></h4><div ng-repeat="argument in task.arguments track by $index"><input type=text ng-model=argument.label placeholder="argument name" style=width:33%;margin-right:7px;vertical-align:middle;><div ng-if=argument.custom style=display:inline-block;width:33%;margin-right:7px;vertical-align:middle;><input type=text ng-model=argument.value placeholder="argument string"></div><div ng-if=!argument.custom style=display:inline-block;width:33%;margin-right:7px;vertical-align:middle;><div ng-bind=argument.valueLabel></div></div><button class="circle orange" style="width: 30px;vertical-align:middle;" ng-click="orb.OrbiterService.removeArrayElement(task.arguments, $index)"><i class="fa fa-trash"></i></button></div><div class=c-dialogue_input><button style="margin: 7px 0px;" ng-click="orb.dialogueSidebar = orb.dialogueSidebar === \'properties\' ? \'\' : \'properties\'; orb.dialogueTaskToAddTo=task">Properties</button> <button style="margin: 7px 0px;" ng-click="orb.dialogueSidebar = orb.dialogueSidebar === \'methods\' ? \'\' :\'methods\'; orb.dialogueTaskToAddTo=task">Methods</button> <button class=orange style="margin: 7px 0px;" ng-click="orb.OrbiterService.removeArrayElement(eventObj.fn, $index)">Delete task</button></div></div><div class="c-dialogue_input done_buttons" style="text-align: right;"><button class=circle ng-if="eventObj.label && eventObj.fn.length" ng-click="orb.OrbiterService.currentEventObject=null"><i class="fa fa-check"></i></button> <button class=circle ng-if="!eventObj.label || !eventObj.fn.length" ng-click="orb.OrbiterService.currentEventObject=null"><i class="fa fa-close"></i></button></div></div><div class=c-dialogue_right><div class=c-dialogue_event-property-list><h3>Properties</h3><div ng-repeat="property in orb.InteractiveService.properties track by $index" ng-if=property.label ng-click="orb.dialogueTaskToAddTo.property=property;orb.dialogueSidebar=\'\';orb.dialogueTaskToAddTo=null;" ng-bind=property.label class=c-dialogue_event-property-item></div></div><div class=c-dialogue_event-method-list><h3>Methods</h3><div ng-repeat="method in orb.InteractiveService.methods track by $index" ng-click="orb.dialogueTaskToAddTo.method=method;orb.dialogueSidebar=\'\';orb.dialogueTaskToAddTo=null;" ng-bind=method.label class=c-dialogue_event-method-item></div></div></div></div></div></div>',controller:"OrbiterCtlr",model:"app"})}]).controller("OrbiterCtlr",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb"><div class=c-sidebar_elements_properties><h4>Properties</h4><div ng-if=orb.InteractiveService.elementProperties><div ng-repeat="(propertyKey, property) in orb.InteractiveService.elementProperties.properties track by $index" class="c-sidebar_elements_property c-sidebar_item"><label><span ng-bind=propertyKey></span>&nbsp;&nbsp;<span ng-click="orb.OrbiterService.propertyDialogue={element:orb.InteractiveService.elementProperties, propertyKey:propertyKey};orb.debug(property)" class=c-sidebar_elements_property_bind-button>@</span></label><textarea ng-if="property.type === \'textarea\' || property.type === \'text\'" ng-bind="orb.InteractiveService.getBinding(orb.InteractiveService.elementProperties, propertyKey)" interactive-model="{element: orb.InteractiveService.elementProperties, propertyKey: propertyKey}"></textarea></div></div></div><div class=c-sidebar_events><h4>Events</h4><div ng-if=orb.InteractiveService.elementProperties><div ng-repeat="(eventKey, event) in orb.InteractiveService.elementProperties.events track by $index" class="c-sidebar_event c-sidebar_item"><label><span ng-bind=eventKey></span> <button class="circle small light-blue" ng-if=!event.fn.length ng-click="orb.OrbiterService.currentEventObject=event"><i class="fa fa-plus"></i></button></label><div class=c-sidebar_event_function ng-if=event.fn.length><label><span ng-bind=event.label></span> <button class="circle small" style=color:#fff; ng-click="orb.OrbiterService.currentEventObject=event;"><i class="fa fa-pencil"></i></button></label></div></div></div></div></div>'}}angular.module("app").directive("orbiterSidebar",e)}();
//# sourceMappingURL=orbiter.min.js.map