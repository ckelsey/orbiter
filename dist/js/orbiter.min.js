!function(){"use strict";function e(){}angular.module("app",["ngResource","ngSanitize","ngRoute","ngAnimate","ngStorage","aCKolor"]).controller("AppCtlr",e)}(),function(){"use strict";function e(e){this.InteractiveService=e,this.debug=function(e){console.log(e)}}e.$inject=["InteractiveService"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{title:"",template:'<div ng-controller="InteractiveCtlr as ictlr" class=m-height100><div ng-repeat="data in ictlr.InteractiveService.htmlTree.nodes track by data.id" interactive-node=data interactive-node-parent=ictlr.InteractiveService.htmlTree ng-init="path = $index" interactive-node-parent-path=path class=c-interactive_wrapper></div></div>',controller:"InteractiveCtlr",model:"app"})}]).controller("InteractiveCtlr",e)}(),function(){"use strict";function e(){return{jQuery:jQuery,mflyCommands:mflyCommands}}angular.module("app").service("InteractiveLibraries",e)}(),function(){"use strict";function e(){return{logTestString:{key:"logTestString",label:"Log test string property",arguments:{logme:{keyPath:"properties.testString.value",value:null}},fn:"console.log(logme);"}}}angular.module("app").service("InteractiveMethods",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"A",scope:{interactiveModel:"=interactiveModel"},link:function(t,i,n){i.bind("input",function(n){r(function(){for(var r=t.interactiveModel.element.properties[t.interactiveModel.propertyKey].bind.split("."),n=null,o=0;o<r.length;o++)0===o&&(n=e.properties),n=n[r[o]];n.value=i.val()})})}}}e.$inject=["InteractiveService","OrbiterService","$timeout"],angular.module("app").directive("interactiveModel",e)}(),function(){"use strict";function e(e,t,r,i,n){return{restrict:"A",scope:{data:"=interactiveNode",parent:"=interactiveNodeParent",repeaterIndex:"=repeaterIndex",repeaterPath:"=repeaterPath"},link:function(o,a,l){function s(){o.dataProperties=angular.copy(e.elements[o.data.id]),o.styles=e.getStyles(o.dataProperties),o.mock=["test","test2"],o.repeaterPathArray=[],o.repeaterPath&&(o.repeaterPathArray=o.repeaterPath.split("."));var t="",r=function(){t+=' ng-controller="InteractiveCtlr as ictlr"'},i=function(){t+=' ng-style="ictlr.InteractiveService.getStyles(dataProperties)"'},l=function(){for(var e in o.dataProperties.events)o.dataProperties.events[e].fn&&o.dataProperties.events[e].fn.length&&(t+=o.dataProperties.events[e].method+"=\"ictlr.InteractiveService.runFN(dataProperties.events['"+e+"'])\" ")},s=function(){t+=' interactive-id="'+o.dataProperties.id+'"'},p=function(){if(void 0!==o.repeaterIndex&&null!==o.repeaterIndex){t+=' repeater-index="repeaterIndex" repeater-path="repeaterPath"';for(var e in o.dataProperties.properties){for(var r=o.dataProperties.properties[e].bind.split("."),i=!1,n=0;n<o.repeaterPathArray.length;n++){if(o.repeaterPathArray[n]!==r[0]){i=!1;break}r.shift(),i=!0}if(i){var a=angular.copy(o.repeaterPathArray);a.push(o.repeaterIndex),r.shift(),a=a.concat(r);var l=a.join(".");o.dataProperties.properties[e].bind=l}}}},c=function(){if("Text"===o.dataProperties.label||"Link"===o.dataProperties.label||"Button"===o.dataProperties.label){var r=o.dataProperties.properties.text.bind,i="elements."+o.dataProperties.id+".properties.text";t+=e.developer&&r!==i?"<span ng-bind-html=\"ictlr.InteractiveService.getBinding(dataProperties, 'text') || 'No data, placeholder text'\" class=\"c-interactive-bound\"></span>":'<span ng-bind-html="ictlr.InteractiveService.getBinding(dataProperties, \'text\')" class="c-interactive-bound"></span>'}},d=function(){t+='<el ng-repeat="childData in data.nodes track by childData.id"',p(),t+=' interactive-node="childData"',t+=' interactive-node-parent="data"',t+=" ng-style=\"ictlr.InteractiveService.getStyles(ictlr.InteractiveService.elements[childData.id], 'display')\"",t+=" ng-class=\"childData.id === ictlr.InteractiveService.elementProperties.id ? 'm-active-iteractive-node' : ''\"",t+="></el>"},u=function(){r(),p(),i(),l(),s(),t+=">",c(),d()};"Block"===o.dataProperties.label?(t+="<div",u(),t+="</div>"):"Text"===o.dataProperties.label?(t+="<el",u(),t+="</el>"):"Link"===o.dataProperties.label?(t+="<a href=\"{{ictlr.InteractiveService.getBinding(dataProperties, 'href')}}\"",u(),t+="</a>"):"Image"===o.dataProperties.label?(t+=e.developer?"<img src=\"{{ictlr.InteractiveService.getBinding(dataProperties, 'src') || 'src/media/default.png'}}\"":"<img src=\"{{ictlr.InteractiveService.getBinding(dataProperties, 'src')}}\"",u()):"Button"===o.dataProperties.label?(t+="<button",u(),t+="</button>"):"Repeat"===o.dataProperties.label&&(o.repeatObj=e.getBinding(o.dataProperties,"repeat"),o.repeatTemplate=e.getBinding(o.dataProperties,"template"),t+="<el",p(),l(),s(),t+=' ng-repeat="(repKey, rep) in repeatObj track by $index" repeater-index="repKey" interactive-repeater="dataProperties" repeater-path="repeaterPath">',t+="</el>"),a.html(t),n(a.contents())(o)}if(s(),o.$watchCollection(function(){return e.getBinding(e.elements[o.data.id],"repeat")},function(e,t){t!==e&&s()}),e.developer){var p=angular.element(a[0].firstElementChild);a.bind("dragover",function(t){t.preventDefault(),a.addClass(l.orbiterAcceptDrop?e.canAccept(l.orbiterAcceptDrop):e.canAcceptDragClass)}),a.bind("dragleave",function(t){a.removeClass(e.canAcceptDragClass)}),a.bind("drop",function(n){return n.preventDefault(),n.stopPropagation(),i(function(){angular.element(document.querySelectorAll("."+e.canAcceptDragClass)).removeClass(e.canAcceptDragClass),r.addToInteractive(o.data,t.dragging)}),!1}),a.bind("click",function(e){e.preventDefault(),e.stopPropagation(),i(function(){r.activeProperties(o.dataProperties)})}),p.bind("click",function(e){e.preventDefault()})}}}}e.$inject=["InteractiveService","OrbiterService","OrbiterElementsService","$timeout","$compile"],angular.module("app").directive("interactiveNode",e)}(),function(){"use strict";function e(){return{"Test string":{key:"Test string",orbiterType:"property",value:null,type:"text",defaultValue:"Hi! This is a testString"}}}angular.module("app").service("InteractiveProperties",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{data:"=interactiveRepeater",repeaterIndex:"=repeaterIndex",repeaterPath:"=repeaterPath"},link:function(r,i,n){r.template=e.lookUpPath(e,r.data.properties.template.bind),console.log(r.data),r.repeaterPath=r.data.properties.repeat.bind;var o='<el ng-controller="InteractiveCtlr as ictlr">';o+="<el",o+=' ng-repeat="data in template.nodes track by data.id"',o+=' interactive-node="data"',o+=' repeater-index="repeaterIndex"',o+=' repeater-path="repeaterPath"',o+=' interactive-node-parent="template"',o+=">",o+="</el>",o+="</el>",i.html(o),t(i.contents())(r)}}}e.$inject=["InteractiveService","$compile"],angular.module("app").directive("interactiveRepeater",e)}(),function(){"use strict";function e(e,t,r,i,n,o){var a={developer:!1,propertyPrefix:"!@#$%^&*()|",htmlTree:{},properties:{},elements:{},methods:{},libraries:{},dragging:null,canAcceptDragClass:"c-drag_can-accept",canAccept:function(e){try{e=JSON.parse(e)}catch(t){}return e&&"object"==typeof e&&a.dragging&&!e.length?a.canAcceptDragClass:void 0},styles:e,getStyles:function(t,r){if(t&&t.hasOwnProperty("properties")){var i=t.properties,n={},o=function(r){if(e.hasOwnProperty(r)){var i=r,o=a.getBinding(t,r);i=e[r].ruleName,e[r].hasOwnProperty("transform")&&e[r].transform.hasOwnProperty(o)&&(o=e[r].transform[o]),e[r].hasOwnProperty("append")&&(o+=e[r].append),o&&"null"!==o&&(n[i]=o)}};if(r)i.hasOwnProperty(r)&&i[r].value&&o(r);else for(var l in i)o(l);return n}return!1},getBinding:function(e,t){if(e&&e.hasOwnProperty("properties")&&e.properties.hasOwnProperty(t)&&e.properties[t].hasOwnProperty("bind")){var r=a.lookUpPath(a,e.properties[t].bind);return r&&r.hasOwnProperty("value")?r.value:r?r:null}return null},lookUpPath:function(e,t){try{if(t){var r=t.split(".");if(1===r.length)try{return e[r[0]]}catch(i){return null}return a.lookUpPath(e[r[0]],r.slice(1).join("."))}return null}catch(i){return null}},findElement:function(e,t){if(t===e.id)return e;for(var r=0;r<e.nodes.length;r++){var i=a.findElement(e.nodes[r],t);if(i)return i}return!1},runFN:function(e){var t=function(e,r,i){if(1===r.length)return e[r[0]]=i,e[r[0]];var n=e[r[0]];return r.shift(),t(n,r,i)},r=function(e,r){var i="custom text"===e.valueType?e.value:a.lookUpPath(a,e.value);try{void 0!==r&&i.split("$RESULT$").length>1&&(i=r)}catch(n){}o(function(){var r=t(a,e.target.split("."),i);console.log(r,a)})},i=function(e,t){for(var r=a.lookUpPath(a,e.target),i=[],o=0;o<e.arguments.length;o++)if("custom text"===e.arguments[o].type){var l=e.arguments[o].value;try{l=JSON.parse(e.arguments[o].value)}catch(s){}i.push(l)}var p=r.apply(this,i);if(e.hasOwnProperty("promises")&&e.promises.length)for(var c=0;c<e.promises.length;c++)!function(e){p.hasOwnProperty(e.promiseType)&&p[e.promiseType](function(t){console.log("res",t),n(e,t)})}(e.promises[c])},n=function(e,t){switch(e.type){case"set":r(e,t);break;case"run":i(e,t)}};if(!a.developer)for(var l=0;l<e.fn.length;l++)n(e.fn[l])}};return a.libraries=i,a}e.$inject=["InteractiveStyles","InteractiveProperties","InteractiveMethods","InteractiveLibraries","$localStorage","$timeout"],angular.module("app").service("InteractiveService",e)}(),function(){"use strict";function e(){return{display:{ruleName:"display",category:"display"},"background-color":{ruleName:"background-color",category:"display"},"border-radius":{ruleName:"border-radius",category:"display"},"box-shadow":{ruleName:"box-shadow",category:"display"},overflow:{ruleName:"overflow",category:"display"},cursor:{ruleName:"cursor",category:"display"},"vertical-align":{ruleName:"vertical-align",category:"display"},outline:{ruleName:"outline",category:"display"},"z-index":{ruleName:"z-index",category:"display"},transition:{ruleName:"transition",category:"display"},width:{ruleName:"width",category:"dimensions"},"max-width":{ruleName:"max-width",category:"dimensions"},"min-width":{ruleName:"min-width",category:"dimensions"},height:{ruleName:"height",category:"dimensions"},"max-height":{ruleName:"max-height",category:"dimensions"},"min-height":{ruleName:"min-height",category:"dimensions"},position:{ruleName:"position",category:"position"},top:{ruleName:"top",category:"position"},bottom:{ruleName:"bottom",category:"position"},left:{ruleName:"left",category:"position"},right:{ruleName:"right",category:"position"},transform:{ruleName:"transform",category:"position"},color:{ruleName:"color",category:"text"},"font-size":{ruleName:"font-size",category:"text"},size:{ruleName:"font-size",category:"text"},"font-weight":{ruleName:"font-weight",category:"text"},weight:{ruleName:"font-weight",category:"text"},"text-align":{ruleName:"text-align",category:"text"},align:{ruleName:"text-align",category:"text"},"font-style":{ruleName:"font-style",category:"text"},"text-decoration":{ruleName:"text-decoration",category:"text"},"line-height":{ruleName:"line-height",category:"text"},"padding-top":{ruleName:"padding-top",category:"spacing"},"padding-right":{ruleName:"padding-right",category:"spacing"},"padding-bottom":{ruleName:"padding-bottom",category:"spacing"},"padding-left":{ruleName:"padding-left",category:"spacing"},"margin-top":{ruleName:"margin-top",category:"spacing"},"margin-right":{ruleName:"margin-right",category:"spacing"},"margin-bottom":{ruleName:"margin-bottom",category:"spacing"},"margin-left":{ruleName:"margin-left",category:"spacing"},"border-top-color":{ruleName:"border-top-color",category:"border"},"border-top-width":{ruleName:"border-top-width",category:"border"},"border-top-style":{ruleName:"border-top-style",category:"border"},"border-bottom-color":{ruleName:"border-bottom-color",category:"border"},"border-bottom-width":{ruleName:"border-bottom-width",category:"border"},"border-bottom-style":{ruleName:"border-bottom-style",category:"border"},"border-left-color":{ruleName:"border-left-color",category:"border"},"border-left-width":{ruleName:"border-left-width",category:"border"},"border-left-style":{ruleName:"border-left-style",category:"border"},"border-right-color":{ruleName:"border-right-color",category:"border"},"border-right-width":{ruleName:"border-right-width",category:"border"},"border-right-style":{ruleName:"border-right-style",category:"border"}}}angular.module("app").service("InteractiveStyles",e)}(),function(){"use strict";function e(e,t,r,i){return{restrict:"E",link:function(e,n,o){var a=["border-top-width","border-top-style","border-top-color","border-bottom-width","border-bottom-style","border-bottom-color","border-left-width","border-left-style","border-left-color","border-right-width","border-right-style","border-right-color"],l=function(){e.borderProperties={};for(var o=0;o<a.length;o++){var l=r.lookUpPath(r,r.elementProperties.properties[a[o]].bind);l&&(e.borderProperties[a[o]]=l)}for(var s='<div class="c-expandable" ng-class="borderPropertiesToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="borderPropertiesToggled ? borderPropertiesToggled=false : borderPropertiesToggled=true">Borders</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-border-table"><div class="c-border-table-cell"><div class="left-side"><input ng-model="borderProperties[\'border-left-width\'].value"><a-ckolor model="borderProperties[\'border-left-color\'].value" type="\'hidden\'"></a-ckolor><select ng-model="borderProperties[\'border-left-style\'].value">',p=0;p<t.block.properties["border-right-style"].options.length;p++)s+='<option value="'+t.block.properties["border-right-style"].options[p]+'">'+t.block.properties["border-right-style"].options[p]+"</option>";s+='</select></div></div><div class="c-border-table-cell"><div class="middle-top"><input ng-model="borderProperties[\'border-top-width\'].value"><a-ckolor model="borderProperties[\'border-top-color\'].value" type="\'hidden\'"></a-ckolor><select ng-model="borderProperties[\'border-top-style\'].value">';for(var p=0;p<t.block.properties["border-right-style"].options.length;p++)s+='<option value="'+t.block.properties["border-right-style"].options[p]+'">'+t.block.properties["border-right-style"].options[p]+"</option>";s+='</select></div><div class="middle-middle"></div><div class="middle-bottom"><input ng-model="borderProperties[\'border-bottom-width\'].value"><a-ckolor model="borderProperties[\'border-bottom-color\'].value" type="\'hidden\'"></a-ckolor><select ng-model="borderProperties[\'border-bottom-style\'].value">';for(var p=0;p<t.block.properties["border-right-style"].options.length;p++)s+='<option value="'+t.block.properties["border-right-style"].options[p]+'">'+t.block.properties["border-right-style"].options[p]+"</option>";s+='</select></div></div><div class="c-border-table-cell"><div class="right-side"><input ng-model="borderProperties[\'border-right-width\'].value"><a-ckolor model="borderProperties[\'border-right-color\'].value" type="\'hidden\'"></a-ckolor><select ng-model="borderProperties[\'border-right-style\'].value">';for(var p=0;p<t.block.properties["border-right-style"].options.length;p++)s+='<option value="'+t.block.properties["border-right-style"].options[p]+'">'+t.block.properties["border-right-style"].options[p]+"</option>";s+="</select></div></div></div></div></div></div>",n.html(s),i(n.contents())(e)};l(),e.$watch(function(){return r.elementProperties.id},function(e,t){e!==t&&l()})}}}e.$inject=["OrbiterService","OrbiterElementTypes","InteractiveService","$compile"],angular.module("app").directive("borderProperties",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb" ng-include="\'src/html/interactive/main.html\'" class=c-interactive_includer></div>'}}angular.module("app").directive("orbiterCanvas",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(e,i,n){var o=["width","min-width","max-width","height","min-height","max-height"],a=function(){e.dimensionsProperties={};for(var n=0;n<o.length;n++){var a=t.lookUpPath(t,t.elementProperties.properties[o[n]].bind);a&&(e.dimensionsProperties[o[n]]=a)}var l='<div class="c-expandable" ng-class="dimensionsSettingsToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="dimensionsSettingsToggled ? dimensionsSettingsToggled=false : dimensionsSettingsToggled=true">Dimensions</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-input-row"><div class="c-input-group"><label><i class="fa fa-arrows-h"></i></label><input ng-model="dimensionsProperties[\'width\'].value" type="text" /></div></div><div class="c-input-row"><div class="c-input-group"><label style="white-space:nowrap;">min <i class="fa fa-arrows-h"></i></label><input ng-model="dimensionsProperties[\'min-width\'].value" type="text" /></div><div class="c-input-group"><label style="white-space:nowrap;">max <i class="fa fa-arrows-h"></i></label><input ng-model="dimensionsProperties[\'max-width\'].value" type="text" /></div></div><div class="c-input-row"><div class="c-input-group"><label><i class="fa fa-arrows-v"></i></label><input ng-model="dimensionsProperties[\'height\'].value" type="text" /></div></div><div class="c-input-row"><div class="c-input-group"><label style="white-space:nowrap;">min <i class="fa fa-arrows-v"></i></label><input ng-model="dimensionsProperties[\'min-height\'].value" type="text" /></div><div class="c-input-group"><label style="white-space:nowrap;">max <i class="fa fa-arrows-v"></i></label><input ng-model="dimensionsProperties[\'max-height\'].value" type="text" /></div></div></div></div></div>';i.html(l),r(i.contents())(e)};a(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&a()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("dimensionsProperties",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(e,i,n){var o=["display","background-color","box-shadow","border-radius","outline","overflow","cursor","vertical-align","z-index","transition"],a=function(){e.diplayProperties={};for(var n=0;n<o.length;n++){var a=t.lookUpPath(t,t.elementProperties.properties[o[n]].bind);a&&(e.diplayProperties[o[n]]=a)}var l='<div class="c-expandable" ng-class="diplayPropertiesToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="diplayPropertiesToggled ? diplayPropertiesToggled=false : diplayPropertiesToggled=true">Display</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-input-row"><div class="c-input-group"><label><i class="fa fa-eye"></i></label><select ng-model="diplayProperties.display.value"><option value="none">none</option><option value="block">block</option><option value="inline">inline</option><option value="inline-block">inline-block</option><option value="flex">flex</option><option value="inherit">Inherit</option><option value=""></option></select></div><div class="c-input-group"><label><i class="fa fa-external-link"></i></label><select ng-model="diplayProperties.overflow.value"><option value="hidden">hidden</option><option value="scroll">scroll</option><option value="auto">auto</option><option value="initial">Initial</option><option value="inherit">Inherit</option><option value=""></option></select></div><div class="c-input-group"><label><i class="fa fa-mouse-pointer"></i></label><select ng-model="diplayProperties.cursor.value"><option value="auto">auto</option><option value="default">default</option><option value="none">none</option><option value="help">help</option><option value="pointer">pointer</option><option value="progress">progress</option><option value="wait">wait</option><option value="cell">cell</option><option value="crosshair">crosshair</option><option value="text">text</option><option value="vertical-text">vertical-text</option><option value="alias">alias</option><option value="copy">copy</option><option value="move">move</option><option value="no-drop">no-drop</option><option value="not-allowed">not-allowed</option><option value="all-scroll">all-scroll</option><option value="col-resize">col-resize</option><option value="row-resize">row-resize</option><option value="n-resize">n-resize</option><option value="e-resize">e-resize</option><option value="s-resize">s-resize</option><option value="w-resize">w-resize</option><option value="ne-resize">ne-resize</option><option value="nw-resize">nw-resize</option><option value="se-resize">se-resize</option><option value="sw-resize">sw-resize</option><option value="ew-resize">ew-resize</option><option value="ns-resize">ns-resize</option><option value="nesw-resize">nesw-resize</option><option value="nwse-resize">nwse-resize</option><option value="zoom-in">zoom-in</option><option value="zoom-out">zoom-out</option><option value="grab">grab</option><option value="grabbing">grabbing</option><option value=""></option></select></div><div class="c-input-group"><label><i class="fa fa-arrows-v"></i></label><select ng-model="diplayProperties[\'vertical-align\'].value"><option value="baseline">baseline</option><option value="sub">sub</option><option value="super">super</option><option value="text-top">text-top</option><option value="text-bottom">text-bottom</option><option value="middle">middle</option><option value="top">top</option><option value="bottom">bottom</option><option value=""></option></select></div><div class="c-input-group"><label><i class="fa fa-circle-o"></i></label><input ng-model="diplayProperties[\'border-radius\'].value" type="text"></div><div class="c-input-group"><label class="text">z</label><input ng-model="diplayProperties[\'z-index\'].value" type="text"></div><div class="c-input-group"><label><i class="fa fa-eyedropper"></i></label><a-ckolor model="diplayProperties[\'background-color\'].value" type="\'hidden\'"></a-ckolor></div></div><div class="c-input-row"><div class="c-input-group full"><label class="text">Outline</label><input ng-model="diplayProperties[\'outline\'].value" type="text"></div></div><div class="c-input-row"><div class="c-input-group full"><label class="text">Shadow</label><input ng-model="diplayProperties[\'box-shadow\'].value" type="text"></div></div><div class="c-input-row"><div class="c-input-group full"><label class="text">Transition</label><input ng-model="diplayProperties[\'transition\'].value" type="text"></div></div></div></div></div>';i.html(l),r(i.contents())(e)};a(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&a()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("diplayProperties",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{orbiterDragData:"=orbiterDragData"},link:function(t,r,i){function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}r.attr("draggable","true");var o=i.id;o||(o=n(),r.attr("id",o)),r.bind("dragstart",function(r){e.drag(angular.copy(t.orbiterDragData))}),r.bind("dragend",function(t){e.drag(null)})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDraggable",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(r,i,n){function o(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;14>r;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var a=n.id;a||(a=o(),i.attr("id",a)),i.bind("dragover",function(e){e.preventDefault(),i.addClass(n.orbiterDroppable?t.canAccept(n.orbiterDroppable):t.canAcceptDragClass)}),i.bind("dragleave",function(e){i.removeClass(t.canAcceptDragClass)}),i.bind("drop",function(r){r.preventDefault();e.dragging;return i.removeClass(t.canAcceptDragClass),!1})}}}e.$inject=["OrbiterService","InteractiveService"],angular.module("app").directive("orbiterDroppable",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",scope:{element:"=elementModel",propertyKey:"=propertyKey",inputType:"=inputType"},link:function(e,i,n){function o(){var n="";if(e.element&&e.propertyKey&&e.element.properties.hasOwnProperty(e.propertyKey)&&(e.property=e.element.properties[e.propertyKey],e.property))switch(e.bindingObj=t.lookUpPath(t,e.property.bind),e.inputType){case"select":n+='<select ng-model="bindingObj"><option ng-repeat="option in property.options track by $index" value="{{option}}" ng-bind="option"></option></select>';break;case"textarea":n+='<textarea ng-model="bindingObj.value" ng-trim="false"></textarea>';break;case"text":n+='<input ng-model="bindingObj.value" type="text"></textarea>';break;case"color":n+='<a-ckolor model="bindingObj" type="\'hidden\'"></a-ckolor>'}i.html(n),r(i.contents())(e)}o(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&o()}),e.$watch(function(){return t.lookUpPath(t,e.property.bind)},function(e,t){e!==t&&o()}),e.$watch(function(){return e.bindingObj},function(e,t){e!==t&&o()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("elementPropertyInput",e)}(),function(){"use strict";function e(e,t,r,i,n,o,a,l,s){var p={dialogueModelType:null,dragging:null,drag:function(t){p.dragging=t,e.dragging=t},selectedProperty:null,saveSelectedProperty:function(t){s(function(){var r=t.path.split(".")[0];if("libraries"===r){var i=e.lookUpPath(e,t.path);if(i.length){t.obj.arguments=[];for(var n=0;n<i.length;n++)t.obj.arguments.push({type:null,value:null})}}t.obj[t.key]=t.path,p.save(),p.selectedProperty=null})},removeArrayElement:function(e,t){return e.splice(t,1)},mapProperties:function(e,t){for(var r in t)t[r]["new"]&&"none"!==t[r]["new"]?e.properties[r].bind=t[r]["new"]:"none"===t[r]["new"]&&(e.properties[r].bind=e.id+"."+r)},save:function(){e.htmlTree[e.htmlTree.current]={nodes:e.htmlTree.nodes},l.OrbiterInteractiveTree||(l.OrbiterInteractiveTree={}),l.OrbiterInteractiveProperties||(l.OrbiterInteractiveProperties={}),l.OrbiterInteractiveMethods||(l.OrbiterInteractiveMethods={}),l.OrbiterInteractiveTree=e.htmlTree,l.OrbiterInteractiveProperties=e.properties,l.OrbiterInteractiveElements=e.elements,l.OrbiterInteractiveMethods=e.methods},projectDataDialogue:null,exportProject:function(){p.projectDataDialogue={type:"export",data:JSON.stringify({OrbiterInteractiveTree:e.htmlTree,OrbiterInteractiveProperties:e.properties,OrbiterInteractiveElements:e.elements,OrbiterInteractiveMethods:e.methods})}},importProject:function(t){try{var r=JSON.parse(t.data);l.OrbiterInteractiveProperties=r.OrbiterInteractiveProperties,e.properties=l.OrbiterInteractiveProperties;for(var i in e.properties)e.properties[i].hasOwnProperty("defaultValue")&&o.buildProperty(e.properties[i]);l.OrbiterInteractiveElements=r.OrbiterInteractiveElements,e.elements=l.OrbiterInteractiveElements;for(var i in e.elements)for(var s in e.elements[i].properties){var c=e.lookUpPath(e,e.elements[i].properties[s].bind);c&&(e.elements[i].properties[s].value=c.hasOwnProperty("defaultValue")?c.defaultValue:c.hasOwnProperty("value")?c.value:c)}r.hasOwnProperty("OrbiterInteractiveTree")&&r.OrbiterInteractiveTree.hasOwnProperty("nodes")&&r.OrbiterInteractiveTree.nodes.length>0?(l.OrbiterInteractiveTree=r.OrbiterInteractiveTree,e.htmlTree=l.OrbiterInteractiveTree):(l.OrbiterInteractiveTree={nodes:[]},e.htmlTree=l.OrbiterInteractiveTree,n.addToInteractive(e.htmlTree,a.block)),n.activeProperties(e.lookUpPath(e.elements,e.htmlTree.nodes[0].id)),e.htmlTree.hasOwnProperty("main")||(e.htmlTree.main={nodes:e.htmlTree.nodes},e.htmlTree.current="main"),e.htmlTree.current||(e.htmlTree.current="main"),e.developer||(e.htmlTree.current="main"),p.projectDataDialogue=null}catch(d){console.log(d)}},spacingProperties:function(e){for(var t={},r=["padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],i=0;i<r.length;i++)if(e.properties.hasOwnProperty(r[i])){var n=r[i].split("-");t[n[0]]||(t[n[0]]={}),t[n[0]][n[1]]=e.properties[r[i]]}return t},currentEventObject:null,currentEventObjectError:{label:null,tasks:[],taskErrors:!1},currentEventObjectValidator:function(t){p.currentEventObjectError={label:null,tasks:[],taskErrors:!1},!p.currentEventObject.label&&p.currentEventObject.fn.length>0&&(p.currentEventObjectError.label="Title is required");for(var r=0;r<p.currentEventObject.fn.length;r++){var i=[];p.currentEventObject.fn[r].type||i.push("Type"),p.currentEventObject.fn[r].target||i.push("Target"),i.length?(i="Missing required fields: "+i.join(", "),p.currentEventObjectError.tasks[r]=i,p.currentEventObjectError.taskErrors=!0):p.currentEventObjectError.tasks[r]=null}p.currentEventObjectError.label||p.currentEventObjectError.taskErrors||(t&&(e.elements[e.elementProperties.id].events=e.elementProperties.events,p.save()),p.currentEventObject=null,p.dialogueModelType=null)},switchTemplate:function(t){e.htmlTree[e.htmlTree.current].nodes=angular.copy(e.htmlTree.nodes),e.htmlTree.current=t,e.htmlTree.nodes=angular.copy(e.htmlTree[e.htmlTree.current].nodes),p.save()}};l.hasOwnProperty("OrbiterInteractiveProperties")&&l.OrbiterInteractiveProperties&&Object.keys(l.OrbiterInteractiveProperties).length>0?e.properties=l.OrbiterInteractiveProperties:(l.OrbiterInteractiveProperties=angular.copy(t),e.properties=l.OrbiterInteractiveProperties);for(var c in e.properties)e.properties[c].hasOwnProperty("defaultValue")&&o.buildProperty(e.properties[c]);l.hasOwnProperty("OrbiterInteractiveElements")&&l.OrbiterInteractiveElements&&Object.keys(l.OrbiterInteractiveElements).length>0?e.elements=l.OrbiterInteractiveElements:(l.OrbiterInteractiveElements={},e.elements=l.OrbiterInteractiveElements);for(var c in e.elements)for(var d in e.elements[c].properties){var u=e.lookUpPath(e,e.elements[c].properties[d].bind);u&&(e.elements[c].properties[d].value=u.hasOwnProperty("defaultValue")?u.defaultValue:u.hasOwnProperty("value")?u.value:u)}return l.hasOwnProperty("OrbiterInteractiveTree")&&l.OrbiterInteractiveTree.hasOwnProperty("nodes")&&l.OrbiterInteractiveTree.nodes.length>0?e.htmlTree=l.OrbiterInteractiveTree:(l.OrbiterInteractiveTree={nodes:[]},e.htmlTree=l.OrbiterInteractiveTree,n.addToInteractive(e.htmlTree,a.block)),n.activeProperties(e.lookUpPath(e.elements,e.htmlTree.nodes[0].id)),e.htmlTree.hasOwnProperty("main")||(e.htmlTree.main={nodes:e.htmlTree.nodes},e.htmlTree.current="main"),e.htmlTree.current&&e.developer||p.switchTemplate("main"),console.log(e),p}e.$inject=["InteractiveService","InteractiveProperties","InteractiveMethods","InteractiveLibraries","OrbiterElementsService","OrbiterPropertyService","OrbiterElementTypes","$localStorage","$timeout"],angular.module("app").service("OrbiterService",e)}(),function(){"use strict";function e(e,t,r,i,n,o,a,l,s,p){var c=this;this.$localStorage=e,e.Orbiter||(e.Orbiter={}),this.OrbiterService=i,this.OrbiterPropertyService=o,this.OrbiterElementsService=a,this.OrbiterLibrariesService=l,this.OrbiterTemplatesService=s,this.OrbiterElementTypes=n,this.InteractiveService=p,p.developer=!0,this.trackingMouseMove=!1,this.mouseMoveMethod=null,this.sizingElement=null,this.endTrackingMouseMove=function(){return c.trackingMouseMove?(c.trackingMouseMove=!1,void(c.mouseMoveMethod=null)):!1},this.trackMouseMove=function(e){return c.trackingMouseMove?void c.mouseMoveMethod(e):!1},this.canvasElements=function(e){for(var r=c.sizingElement[0],i=1;i<c.sizingElement.length;i++)r=r[c.sizingElement[i]];var n=e.pageX-r.getBoundingClientRect().left;0>n&&(n=0),c.$localStorage.Orbiter.elementsWidth=(t.innerWidth-n)/t.innerWidth*100+"%",c.$localStorage.Orbiter.canvasWidth=n/t.innerWidth*100+"%"},this.debug=function(e){return console.log(e),e},this.lowerCase=function(e){return e.toLowerCase()},this.formatDate=function(e){e||(e=(new Date).getTime());var t=new Date(+e),r=t.getHours(),i=t.getMinutes(),n=r>11?"PM":"AM",o=t.getMonth()+1,a=t.getDate(),l=t.getFullYear();
return o+"-"+a+"-"+l+" "+r+":"+i+" "+n},this.typeOf=function(e){try{return e instanceof HTMLElement?"DOM":"undefined"==typeof e?"undefined":"function"==typeof e?"function":"number"==typeof e?"number":"boolean"==typeof e?"boolean":e instanceof Object?"object":e instanceof Array?"array":"string"}catch(t){return!0}return!0},this.typeOfSafe=function(e,t){return c.typeOf(e[t])},this.dialogueOpen=!1,this.isDialogueOpen=function(){c.dialogueOpen=!1;for(var e=[c.OrbiterService.dialogueModelType,c.OrbiterService.currentEventObject,c.OrbiterService.projectDataDialogue,c.OrbiterTemplatesService.newTemplate,c.OrbiterService.propertyMapperDialogue,c.OrbiterPropertyService.stagedProperty],t=0;t<e.length;t++)if(e[t]){c.dialogueOpen=!0;break}},r.$watch(function(){return c.OrbiterService.propertyMapperDialogue},function(e,t){e!==t&&c.isDialogueOpen()}),r.$watch(function(){return c.OrbiterService.dialogueModelType},function(e,t){e!==t&&c.isDialogueOpen()}),r.$watch(function(){return c.OrbiterService.currentEventObject},function(e,t){e!==t&&c.isDialogueOpen()}),r.$watch(function(){return c.OrbiterService.projectDataDialogue},function(e,t){e!==t&&c.isDialogueOpen()}),r.$watch(function(){return c.OrbiterTemplatesService.newTemplate},function(e,t){e!==t&&c.isDialogueOpen()}),r.$watch(function(){return c.OrbiterPropertyService.stagedProperty},function(e,t){e!==t&&c.isDialogueOpen()})}e.$inject=["$localStorage","$window","$scope","OrbiterService","OrbiterElementTypes","OrbiterPropertyService","OrbiterElementsService","OrbiterLibrariesService","OrbiterTemplatesService","InteractiveService"],angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/_",{title:"Orbiter",template:"<div ng-controller=\"OrbiterCtlr as orb\" class=m-height100 ng-mouseup=\"orb.trackingMouseMove = false\" ng-mouseleave=\"orb.trackingMouseMove = false\" ng-mousemove=\"orb.trackingMouseMove ? orb.mouseMoveMethod($event) : null\" ng-class=\"orb.trackingMouseMove ? 'c-resizer_tracking-mousemove blur-'+orb.dialogueOpen : 'c-ckrank_main blur-'+orb.dialogueOpen\"><div class=c-orbiter_body><div class=c-orbiter_body-inner><orbiter-canvas ng-style=\"{'width':orb.$localStorage.Orbiter.canvasWidth}\"></orbiter-canvas><div class=\"c-resizer m-horizontal\" ng-style=\"{'left':orb.$localStorage.Orbiter.canvasWidth}\" ng-mousedown=\"orb.trackingMouseMove=true; orb.mouseMoveMethod=orb.canvasElements; orb.sizingElement=[$event, 'target', 'previousSibling']\"></div><orbiter-sidebar ng-style=\"{'left':orb.$localStorage.Orbiter.canvasWidth, 'width':orb.$localStorage.Orbiter.elementsWidth}\"></orbiter-sidebar></div></div><orbiter-menu></orbiter-menu><current-event-dialogue class=c-dialogue ng-if=orb.OrbiterService.currentEventObject ng-init=\"eventObj=orb.OrbiterService.currentEventObject\"></current-event-dialogue><new-template-dialogue class=c-dialogue ng-if=orb.OrbiterTemplatesService.newTemplate></new-template-dialogue><new-property-dialogue class=c-dialogue ng-if=orb.OrbiterPropertyService.stagedProperty></new-property-dialogue><property-mapper-dialogue class=c-dialogue ng-if=orb.OrbiterService.propertyMapperDialogue></property-mapper-dialogue><property-dialogue class=c-dialogue ng-if=\"orb.OrbiterService.dialogueModelType && orb.OrbiterService.dialogueModelType === 'properties'\" ng-class=\"orb.OrbiterService.selectedProperty ? 'opaque select-mode' : ''\"></property-dialogue><elements-dialogue class=c-dialogue ng-if=\"orb.OrbiterService.dialogueModelType && orb.OrbiterService.dialogueModelType === 'elements'\" ng-class=\"orb.OrbiterService.selectedProperty ? 'opaque select-mode' : ''\"></elements-dialogue><libraries-dialogue class=c-dialogue ng-if=\"orb.OrbiterService.dialogueModelType && orb.OrbiterService.dialogueModelType === 'libraries'\" ng-class=\"orb.OrbiterService.selectedProperty ? 'opaque select-mode' : ''\"></libraries-dialogue><templates-dialogue class=c-dialogue ng-if=\"orb.OrbiterService.dialogueModelType && orb.OrbiterService.dialogueModelType === 'templates'\" ng-class=\"orb.OrbiterService.selectedProperty ? 'opaque select-mode' : ''\"></templates-dialogue><project-data-dialogue class=c-dialogue ng-if=orb.OrbiterService.projectDataDialogue></project-data-dialogue></div>",controller:"OrbiterCtlr",model:"app"})}]).controller("OrbiterCtlr",e).directive("orbiterMenu",function(){return{restrict:"E",template:'<div class=c-orbiter_menu><div class=left-side><div class="c-orbiter_menu_item c-dropdown"><div><i class="fa fa-table"></i></div><div class=c-dropdown_list><div class="c-dropdown_list_item draggable" ng-class="\'type\'+element.label" ng-repeat="element in orb.OrbiterElementTypes track by $index" orbiter-draggable=true orbiter-drag-data=element><span ng-bind=element.label></span></div></div></div><div class="c-orbiter_menu_item c-dropdown"><div><i class="fa fa-database"></i></div><div class=c-dropdown_list><div class="c-dropdown_list_item properties" ng-click="orb.OrbiterService.dialogueModelType=\'properties\'">properties</div><div class="c-dropdown_list_item elements" ng-click="orb.OrbiterService.dialogueModelType=\'elements\'">elements</div><div class="c-dropdown_list_item libraries" ng-click="orb.OrbiterService.dialogueModelType=\'libraries\'">libraries</div><div class="c-dropdown_list_item libraries" ng-click="orb.OrbiterService.dialogueModelType=\'templates\'">templates</div></div></div><div class="c-orbiter_menu_item c-dropdown"><div><i class="fa fa-file-text"></i></div><div class=c-dropdown_list><div class="c-dropdown_list_item new"><span ng-click="orb.OrbiterTemplatesService.newTemplate = {title:null}">New</span></div><div class=c-dropdown_list_item ng-repeat="(templateKey, template) in orb.InteractiveService.htmlTree track by $index" ng-if="templateKey !== \'nodes\' && templateKey !== \'current\'" ng-click=orb.OrbiterTemplatesService.switchTemplate(templateKey) ng-class="templateKey === orb.InteractiveService.htmlTree.current ? \'active\' : \'\'"><span ng-bind=templateKey></span></div></div></div><div class=c-orbiter_menu_item ng-click=orb.OrbiterService.save()><i class="fa fa-check"></i></div><div class=c-orbiter_menu_item ng-click="orb.OrbiterService.projectDataDialogue={type:\'import\', data:null}"><i class="fa fa-folder-open"></i></div><div class=c-orbiter_menu_item ng-click=orb.OrbiterService.exportProject()><i class="fa fa-external-link"></i></div></div></div>'}}).directive("currentEventDialogue",function(){return{restrict:"E",template:'<div class=c-dialogue_inner ng-class=orb.dialogueSidebar ng-init="orb.dialogueSidebar=\'\'; orb.dialogueTaskToAddTo=null"><h3><span>Functional fun</span> <span><button class=circle ng-if=eventObj.label ng-click="orb.OrbiterService.currentEventObjectValidator(\'save\');orb.OrbiterService.dialogueModelType=null"><i class="fa fa-check"></i></button> <button class="circle orange" ng-if="!eventObj.label || !eventObj.fn.length" ng-click="orb.OrbiterService.currentEventObjectValidator();orb.OrbiterService.dialogueModelType=null"><i class="fa fa-close"></i></button></span></h3><div><div class=c-dialogue_input><small class=error ng-if=orb.OrbiterService.currentEventObjectError.label ng-bind=orb.OrbiterService.currentEventObjectError.label></small> <input type=text ng-model=eventObj.label placeholder="Function title" ng-class="orb.OrbiterService.currentEventObjectError.label ? \'red\' : \'\'"></div><h3>Tasks&nbsp;&nbsp;<button class=circle ng-click="eventObj.fn.push({type:null, target:null, action:null, valueType:null, value:null, promises:[]});"><i class="fa fa-plus"></i></button></h3><interactive-task ng-repeat="(taskKey, task) in eventObj.fn track by $index" task=task key=taskKey tasks=eventObj.fn></interactive-task></div></div>'}}).directive("interactiveTask",function(){return{restrict:"E",scope:{task:"=task",tasks:"=tasks",key:"=key"},template:"<div class=\"c-dialogue_input tasks\" ng-controller=\"OrbiterCtlr as orb\"><small class=error ng-if=orb.OrbiterService.currentEventObjectError.tasks[$index] ng-bind=orb.OrbiterService.currentEventObjectError.tasks[$index]></small><drop-down ng-if=\"task.promiseType !== undefined\" key=promiseType default=\"promise type\" options=\"{done:'done', then:'then'}\" model=task></drop-down><drop-down key=type default=type options=\"{set:'set', run:'run'}\" model=task></drop-down><button ng-if=task.type ng-click=\"task.type==='set' ? orb.OrbiterService.selectedProperty={obj:task,key:'target',type:'properties',path:task.target} : orb.OrbiterService.selectedProperty={obj:task,key:'target',type:'libraries',path:task.target}; orb.OrbiterService.dialogueModelType= task.type==='set'? 'properties' : 'libraries';\" ng-bind=\"task.target || 'set target'\"></button><drop-down ng-if=\"task.type==='set'\" key=action options=\"{'=':'='}\" model=task></drop-down><drop-down ng-if=\"task.type==='set'\" key=valueType options=\"{'custom text':'custom text', property:'property'}\" model=task></drop-down><input ng-if=\"task.type==='set' && task.valueType==='custom text'\" ng-model=task.value type=text placeholder=value> <button ng-if=\"task.type==='set' && task.valueType==='property'\" ng-click=\"orb.OrbiterService.selectedProperty={obj:task,key:'value',path:task.value}; orb.OrbiterService.dialogueModelType='properties'\" ng-bind=\"task.value || 'set value'\"></button> <button class=\"orange circle\" ng-click=\"orb.OrbiterService.removeArrayElement(tasks, taskKey)\"><i class=\"fa fa-trash\"></i></button><div ng-if=\"task.type === 'run' && task.arguments\"><p>Arguments</p><div ng-repeat=\"arg in task.arguments track by $index\"><drop-down key=type options=\"{'custom text':'custom text', properties:'properties'}\" model=arg></drop-down><button ng-if=\"arg.type === 'properties'\" ng-click=\"orb.OrbiterService.selectedProperty={obj:arg,key:'value',type:'properties',path:task.value}; orb.OrbiterService.dialogueModelType='properties'\" ng-bind=\"arg.value || 'set'\"></button> <input ng-if=\"arg.type==='custom text'\" ng-model=arg.value type=text placeholder=value></div></div><div ng-if=\"task.type === 'run'\"><p>Promises&nbsp;&nbsp;<button class=\"circle small\" style=position:relative;top:-2px; ng-click=task.promises.push({promiseType:null})><i class=\"fa fa-plus\"></i></button></p><div ng-repeat=\"(promiseKey, promise) in task.promises track by promise.promiseType\"><interactive-task task=promise key=promiseKey tasks=task.promises></interactive-task></div></div></div>"}}).directive("dropDown",function(){return{restrict:"E",scope:{model:"=model",key:"@key",defaultValue:"@default",options:"=options"},template:'<div class=c-dropdown-tree ng-mouseleave="open=false"><div class=c-dropdown-tree-selection ng-bind="model[key] || defaultValue || key" ng-click="open=true"></div><div class=c-dropdown-tree-list ng-class="open ? \'open\' : \'\'"><div ng-repeat="option in options track by $index" ng-click="model[key]=option" class=c-dropdown-tree-list-item><div class=c-dropdown-tree-list-item-inner ng-bind=option></div></div></div></div>'}})}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(e,i,n){var o=["position","top","bottom","left","right","transform"],a=function(){e.positionProperties={};for(var n=0;n<o.length;n++){var a=t.lookUpPath(t,t.elementProperties.properties[o[n]].bind);a&&(e.positionProperties[o[n]]=a)}var l='<div class="c-expandable" ng-class="positionSettingsToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="positionSettingsToggled ? positionSettingsToggled=false : positionSettingsToggled=true">Position</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-input-row"><div class="c-input-group"><label><i class="fa fa-thumb-tack"></i></label><select ng-model="positionProperties[\'position\'].value"><option value="static">static</option><option value="relative">relative</option><option value="absolute">absolute</option><option value="fixed">fixed</option><option value=""></option></select></div><div class="c-input-group"><label><i class="fa fa-arrow-up"></i></label><input ng-model="positionProperties[\'top\'].value" type="text" /></div><div class="c-input-group"><label><i class="fa fa-arrow-down"></i></label><input ng-model="positionProperties[\'bottom\'].value" type="text" /></div><div class="c-input-group"><label><i class="fa fa-arrow-left"></i></label><input ng-model="positionProperties[\'left\'].value" type="text" /></div><div class="c-input-group"><label><i class="fa fa-arrow-right"></i></label><input ng-model="positionProperties[\'right\'].value" type="text" /></div></div><div class="c-input-row"><div class="c-input-group full"><label class="text">Transform</label><input ng-model="positionProperties[\'transform\'].value" type="text"></div></div></div></div></div>';i.html(l),r(i.contents())(e)};a(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&a()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("positionProperties",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner style="display: flex; flex-direction: column; height: 100%;"><h3><span ng-bind="orb.OrbiterService.projectDataDialogue.type === \'import\' ? \'Import project\' : \'Export project\'"></span> <span><button class=circle ng-if="orb.OrbiterService.projectDataDialogue.type === \'import\'" ng-click=orb.OrbiterService.importProject(orb.OrbiterService.projectDataDialogue);><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterService.projectDataDialogue=null"><i class="fa fa-close"></i></button></span></h3><div style="flex-grow: 1; display: block;position: relative;"><div class=c-dialogue_input style="height: 100%;display: block;position: absolute;margin: 0px;"><textarea ng-model=orb.OrbiterService.projectDataDialogue.data placeholder="json data" style=height:100%;display:block;></textarea></div></div></div>'}}angular.module("app").directive("projectDataDialogue",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(t,i,n){var o=function(){t.propertyMapper={};t.sortedPropertiesToUpdate={};var n="",o=function(e,t){n+='<div class="property">',n+="<label>"+e+"</label>",n+="<button ng-click=\"orb.OrbiterService.selectedProperty={obj:sortedPropertiesToUpdate['"+e+"'], key:'new', type:'"+t+"', path:sortedPropertiesToUpdate['"+e+"'].new || null}; orb.OrbiterService.dialogueModelType='properties'\" ng-bind=\"sortedPropertiesToUpdate['"+e+"'].new || 'set'\"></button>",n+="</div>"};n+='<div class="c-dialogue_inner">',n+="<h3>",n+="<span>Map properties</span>",n+="<span>",n+='<button class="circle" ng-click="orb.OrbiterService.mapProperties(orb.OrbiterService.propertyMapperDialogue.element, sortedPropertiesToUpdate);orb.OrbiterService.propertyMapperDialogue=null" style="margin-right: 7px;"><i class="fa fa-check"></i></button>',n+='<button class="circle orange" ng-click="orb.OrbiterService.propertyMapperDialogue=null; orb.OrbiterService.selectedProperty=null;"><i class="fa fa-close"></i></button>',n+="</h3>",n+="<div>",t.sortedPropertiesToUpdate={},t.sortedPropertiesToUpdate[e.propertyMapperDialogue.type]={current:e.propertyMapperDialogue.element.properties[e.propertyMapperDialogue.type].bind,"new":e.propertyMapperDialogue.element.properties[e.propertyMapperDialogue.type].bind};var a=null;switch(e.propertyMapperDialogue.type){case"template":a="htmlTree";break;default:a="properties"}o(e.propertyMapperDialogue.type,a),n+="</div>",n+="</div>",i.html(n),r(i.contents())(t)};o(),t.$watch(function(){return e.propertyMapperDialogue.element.id},function(e,t){e!==t&&o()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("propertyMapperDialogue",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb" ng-class="orb.OrbiterElementsService.htmlTreeView ? \'tree-open\' : \'\'" class=c-sidebar_wrapper><div ng-if=orb.InteractiveService.elementProperties class=c-element-operations><button class=tree ng-click="orb.OrbiterElementsService.htmlTreeView? orb.OrbiterElementsService.htmlTreeView=false : orb.OrbiterElementsService.htmlTreeView=true" ng-class="orb.OrbiterElementsService.htmlTreeView? \'active\' : \'\'"><i class="fa fa-tree"></i></button> <button class=copy ng-click=orb.OrbiterElementsService.copyElement(orb.InteractiveService.elementProperties)><i class="fa fa-copy"></i></button> <button class=paste ng-click=orb.OrbiterElementsService.pasteElement(orb.InteractiveService.elementProperties)><i class="fa fa-paste"></i></button> <button class=up ng-click=orb.OrbiterElementsService.moveElementUp(orb.InteractiveService.elementProperties)><i class="fa fa-level-up"></i></button> <button class=down ng-click=orb.OrbiterElementsService.moveElementDown(orb.InteractiveService.elementProperties)><i class="fa fa-level-down"></i></button> <button class=trash ng-click=orb.OrbiterElementsService.deleteElement(orb.InteractiveService.elementProperties)><i class="fa fa-trash"></i></button></div><div class=c-sidebar-settings><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if="orb.InteractiveService.elementProperties && orb.InteractiveService.elementProperties.properties.text"><h4><span>Text&nbsp;</span><button ng-click="orb.OrbiterService.propertyMapperDialogue={element:orb.InteractiveService.elementProperties, type:\'text\'}" class=bind-button>@</button></h4><div class=row-padding ng-if="orb.InteractiveService.elementProperties && orb.InteractiveService.elementProperties.properties.text"><element-property-input element-model=orb.InteractiveService.elementProperties property-key="\'text\'" input-type="\'textarea\'"></element-property-input></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if="orb.InteractiveService.elementProperties && orb.InteractiveService.elementProperties.properties.template"><h4><span>Template&nbsp;</span><button ng-click="orb.OrbiterService.propertyMapperDialogue={element:orb.InteractiveService.elementProperties, type:\'template\'}" class=bind-button>@</button></h4><div class=c-sidebar_section-wrapper_inner-section ng-if="orb.InteractiveService.elementProperties.properties.template.bind && orb.InteractiveService.elementProperties.properties.template.bind !== \'properties.\'+ orb.InteractiveService.elementProperties.id +\'.properties.template\'" ng-bind=orb.InteractiveService.elementProperties.properties.template.bind></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if="orb.InteractiveService.elementProperties && orb.InteractiveService.elementProperties.properties.repeat"><h4><span>Repeat&nbsp;</span><button ng-click="orb.OrbiterService.propertyMapperDialogue={element:orb.InteractiveService.elementProperties, type:\'repeat\'}" class=bind-button>@</button></h4><div class=c-sidebar_section-wrapper_inner-section ng-if="orb.InteractiveService.elementProperties.properties.repeat.bind && orb.InteractiveService.elementProperties.properties.repeat.bind !== \'properties.\'+ orb.InteractiveService.elementProperties.id +\'.properties.repeat\'" ng-bind=orb.InteractiveService.elementProperties.properties.repeat.bind></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if=orb.InteractiveService.elementProperties.properties.href><h4><span>Link Url&nbsp;</span><button ng-click="orb.OrbiterService.propertyMapperDialogue={element:orb.InteractiveService.elementProperties, type:\'href\'}" class=bind-button>@</button></h4><div class=row-padding><element-property-input element-model=orb.InteractiveService.elementProperties property-key="\'href\'" input-type="\'text\'"></element-property-input></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if=orb.InteractiveService.elementProperties.properties.src><h4><span>Source Url&nbsp;</span><button ng-click="orb.OrbiterService.propertyMapperDialogue={element:orb.InteractiveService.elementProperties, type:\'src\'}" class=bind-button>@</button></h4><div class=row-padding><element-property-input element-model=orb.InteractiveService.elementProperties property-key="\'src\'" input-type="\'text\'"></element-property-input></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if="orb.InteractiveService.elementProperties && orb.InteractiveService.elementProperties.label !== \'Repeat\'"><h4>Style</h4><div ng-if=orb.InteractiveService.elementProperties class=c-sidebar_section-wrapper_inner><text-properties></text-properties><diplay-properties></diplay-properties><dimensions-properties></dimensions-properties><spacing-properties></spacing-properties><position-properties></position-properties><border-properties></border-properties></div></div><div class=c-sidebar_section-wrapper ng-if=orb.InteractiveService.elementProperties><h4>Events</h4><div ng-if=orb.InteractiveService.elementProperties class=c-sidebar_section-wrapper_inner><div ng-repeat="(eventKey, event) in orb.InteractiveService.elementProperties.events track by $index" class="c-sidebar_event-item c-sidebar_section-wrapper_inner-section"><label><span ng-bind=eventKey></span> <button class="circle small light-blue" ng-if=!event.fn.length ng-click="orb.OrbiterService.currentEventObject=event"><i class="fa fa-plus"></i></button></label><div class=c-sidebar_event_function ng-if=event.fn.length><label><span ng-bind=event.label></span> <button class="circle small" ng-click="orb.OrbiterService.currentEventObject=event;"><i class="fa fa-pencil"></i></button></label></div></div></div></div><div class="c-sidebar_elements_properties c-sidebar_section-wrapper" ng-if=orb.InteractiveService.elementProperties><h4>Metadata</h4><div ng-if=orb.InteractiveService.elementProperties class=c-sidebar_section-wrapper_inner><div class=row-padding><label>Name</label> <small ng-if=orb.OrbiterElementsService.stagedElementIdConflict ng-bind=orb.OrbiterElementsService.stagedElementIdConflict></small><div class=inline-inputs><input type=text ng-model=orb.InteractiveService.elementProperties.tempId ng-class="orb.OrbiterElementsService.stagedElementIdConflict ? \'red\' : \'\'"> <button ng-click=orb.OrbiterElementsService.updateElementId(orb.InteractiveService.elementProperties)><i class="fa fa-check"></i></button></div></div><div class=c-sidebar_section-wrapper_inner-section><label>Children</label><div ng-bind=orb.InteractiveService.elementProperties.nodes.length style="opacity: .7;"></div></div><div class=c-sidebar_section-wrapper_inner-section><label>Added</label><div ng-bind=orb.formatDate(orb.InteractiveService.elementProperties.created) style="opacity: .7;"></div></div><div class=c-sidebar_section-wrapper_inner-section><label>Label</label><div ng-bind=orb.InteractiveService.elementProperties.label style="opacity: .7;"></div></div><div class=c-sidebar_section-wrapper_inner-section><label>ID</label><div ng-bind=orb.InteractiveService.elementProperties.id style="opacity: .7;"></div></div></div></div></div><div class=c-sidebar-tree><html-tree></html-tree></div></div>'}}angular.module("app").directive("orbiterSidebar",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(e,i,n){var o=["padding-top","padding-bottom","padding-right","padding-left","margin-top","margin-bottom","margin-right","margin-left"],a=function(){e.spacingProperties={};for(var n=0;n<o.length;n++)e.spacingProperties[o[n]]=t.lookUpPath(t,t.elementProperties.properties[o[n]].bind);var a="Units of measurement can be in px, em, %, etc...",l=' type="text" title="'+a+'"',s='<div class="c-expandable" ng-class="spacingSettingsToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="spacingSettingsToggled ? spacingSettingsToggled=false : spacingSettingsToggled=true">Margin - Padding</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-spacing-table margin"><div class="c-spacing-table-cell"><input ng-model="spacingProperties[\'margin-left\'].value"'+l+'></div><div class="c-spacing-table-cell"><span>Margins</span><div class="middle-top"><input ng-model="spacingProperties[\'margin-top\'].value"'+l+'></div><div class="c-spacing-table padding"><div class="c-spacing-table-cell"><input ng-model="spacingProperties[\'padding-left\'].value"'+l+'></div><div class="c-spacing-table-cell"><span>Padding</span><div class="middle-top"><input ng-model="spacingProperties[\'padding-top\'].value"'+l+'></div><div class="middle-bottom"><input ng-model="spacingProperties[\'padding-bottom\'].value"'+l+'></div></div><div class="c-spacing-table-cell"><input ng-model="spacingProperties[\'padding-right\'].value"'+l+'></div></div><div class="middle-bottom"><input ng-model="spacingProperties[\'margin-bottom\'].value"'+l+'></div></div><div class="c-spacing-table-cell"><input ng-model="spacingProperties[\'margin-right\'].value"'+l+"></div></div></div></div></div>";i.html(s),r(i.contents())(e)};a(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&a()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("spacingProperties",e)}(),function(){"use strict";function e(e,t,r){return{restrict:"E",link:function(e,i,n){var o=["font-size","font-weight","font-style","text-decoration","text-align","color","line-height"],a=function(){e.textProperties={};for(var n=0;n<o.length;n++){var a=t.lookUpPath(t,t.elementProperties.properties[o[n]].bind);a&&(e.textProperties[o[n]]=a)}var l='<div class="c-expandable" ng-class="textSettingsToggled ? \'active\' : \'\'"><div class="c-expandable_toggler c-sidebar_section-wrapper_inner-section" ng-click="textSettingsToggled ? textSettingsToggled=false : textSettingsToggled=true">Text settings</div><div class="c-expandable_content"><div class="c-expandable_content-inner"><div class="c-input-row"><div class="c-input-group"><label><i class="fa fa-text-height"></i></label><input ng-model="textProperties[\'font-size\'].value" type="text" /></div><div class="c-input-group"><label><i class="fa fa-reorder"></i></label><input ng-model="textProperties[\'line-height\'].value" type="text" /></div><div class="c-input-group"><label><i class="fa fa-bold"></i></label><select ng-model="textProperties[\'font-weight\'].value"><option value="lighter">Lighter</option><option value="light">Light</option><option value="normal">Normal</option><option value="bold">Bold</option><option value="bolder">Bolder</option><option value="inherit">Inherit</option></select></div><div class="c-input-group"><label><i class="fa fa-italic"></i></label><select ng-model="textProperties[\'font-style\'].value"><option value="italic">Italic</option><option value="oblique">Oblique</option><option value="normal">Normal</option><option value="inherit">Inherit</option></select></div><div class="c-input-group"><label><i class="fa fa-underline"></i></label><select ng-model="textProperties[\'text-decoration\'].value"><option value="underline">Underline</option><option value="line-through">Line through</option><option value="overline">Overline</option><option value="none">None</option><option value="inherit">Inherit</option></select></div><div class="c-input-group"><label><i class="fa fa-align-center"></i></label><select ng-model="textProperties[\'text-align\'].value"><option value="left">left</option><option value="center">center</option><option value="right">right</option><option value="justify">justify</option><option value="inherit">Inherit</option></select></div><div class="c-input-group"><label><i class="fa fa-eyedropper"></i></label><a-ckolor model="textProperties[\'color\'].value" type="\'hidden\'"></a-ckolor></div></div></div></div></div>';i.html(l),r(i.contents())(e)};a(),e.$watch(function(){return t.elementProperties.id},function(e,t){e!==t&&a()})}}}e.$inject=["OrbiterService","InteractiveService","$compile"],angular.module("app").directive("textProperties",e)}(),function(){"use strict";function e(){var e=["dashed","dotted","double","groove","hidden","inherit","inset","none","outset","ridge","solid"],t={text:{value:"Text",bind:null},color:{value:null,bind:null},"font-size":{value:null,bind:null},"font-weight":{value:null,bind:null},"font-style":{value:null,bind:null},"text-decoration":{value:null,bind:null},"text-align":{value:null,bind:null},"line-height":{value:null,bind:null},"padding-top":{value:"0px",bind:null},"padding-right":{value:"0px",bind:null},"padding-bottom":{value:"0px",bind:null},"padding-left":{value:"0px",bind:null},"margin-top":{value:"0px",bind:null},"margin-right":{value:"0px",bind:null},"margin-bottom":{value:"0px",bind:null},"margin-left":{value:"0px",bind:null},"background-color":{value:null,bind:null},display:{value:null,bind:null},"box-shadow":{value:null,bind:null},"border-radius":{value:null,bind:null},overflow:{value:null,bind:null},cursor:{value:null,bind:null},"vertical-align":{value:null,bind:null},outline:{value:null,bind:null},"z-index":{value:null,bind:null},transition:{value:null,bind:null},width:{value:null,bind:null},"max-width":{value:null,bind:null},"min-width":{value:null,bind:null},height:{value:null,bind:null},"max-height":{value:null,bind:null},"min-height":{value:null,bind:null},position:{value:null,bind:null},top:{value:null,bind:null},bottom:{value:null,bind:null},left:{value:null,bind:null},right:{value:null,bind:null},transform:{value:null,bind:null},"border-top-color":{value:"transparent",bind:null},"border-top-width":{value:"0px",bind:null},"border-top-style":{value:"none",options:e,bind:null},"border-bottom-color":{value:"transparent",bind:null},"border-bottom-width":{value:"0px",bind:null},"border-bottom-style":{value:"none",options:e,bind:null},"border-left-color":{value:"transparent",bind:null},"border-left-width":{value:"0px",bind:null},"border-left-style":{value:"none",options:e,bind:null},"border-right-color":{value:"transparent",bind:null},"border-right-width":{value:"0px",bind:null},"border-right-style":{value:"none",options:e,bind:null}},r=angular.copy(t);r.href={value:null,bind:null};var i=angular.copy(t),n=angular.copy(t);delete n.text,n.display.value="block";var o=angular.copy(t);delete o.text,o.src={value:"src/media/default.png",bind:null};var a={click:{label:null,method:"ng-click",fn:[]},Init:{label:null,method:"ng-init",fn:[]},"Mouse down":{label:null,method:"ng-mousedown",fn:[]},"Mouse move":{label:null,method:"ng-mousemove",fn:[]}};return{block:{label:"Block",properties:n,events:a},text:{label:"Text",properties:t,events:a},link:{label:"Link",properties:r,events:a},image:{label:"Image",properties:o,events:a},button:{label:"Button",properties:i,events:a},repeat:{label:"Repeat",properties:{template:{value:null,bind:null},repeat:{value:null,bind:null}},events:a}}}angular.module("app").service("OrbiterElementTypes",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner ng-controller="OrbiterCtlr as orb"><h3><span>Available&nbsp;<drop-down options="[\'properties\', \'elements\',\'libraries\', \'templates\']" model=orb.OrbiterService key=dialogueModelType></drop-down></span> <span><button class=circle ng-if=orb.OrbiterService.selectedProperty ng-click="orb.OrbiterService.saveSelectedProperty(orb.OrbiterService.selectedProperty);orb.OrbiterService.dialogueModelType=null"><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterService.dialogueModelType=null"><i class="fa fa-close"></i></button></span></h3><div class=c-dialogue_input><div class=property ng-repeat="(elementKey, element) in orb.InteractiveService.elements track by $index" ng-class="elementPropertyToggled[elementKey] ? \'elementExpanded\' : \'\'"><div class="inline-inputs readonly toggler" ng-click="elementPropertyToggled[elementKey] ? elementPropertyToggled[elementKey]=false : elementPropertyToggled[elementKey]=true"><label ng-bind=elementKey></label> <span ng-bind=element.label></span> <span ng-bind="orb.InteractiveService.getBinding(element, \'text\')"></span></div><div class=inner-property><div ng-repeat="(propertyKey, property) in element.properties track by $index" class=property><div class="inline-inputs readonly" ng-class="\'elements.\'+ elementKey +\'.properties.\'+ propertyKey === orb.OrbiterService.selectedProperty.path ? \'active\' : \'\'" ng-click="orb.OrbiterService.selectedProperty? orb.OrbiterService.selectedProperty.path=\'elements.\'+ elementKey +\'.properties.\'+ propertyKey : null"><label ng-bind=propertyKey></label> <span ng-bind=property.bind></span> <span ng-bind="orb.InteractiveService.getBinding(element, propertyKey)"></span></div></div></div></div></div></div>'
}}angular.module("app").directive("elementsDialogue",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div ng-controller="OrbiterCtlr as orb"><div html-tree-node=orb.InteractiveService.htmlTree></div></div>'}}angular.module("app").directive("htmlTree",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{node:"=htmlTreeNode"},template:'<div class=c-html-tree-node ng-controller="OrbiterCtlr as orb"><div ng-class="node.id ? \'c-html-tree-node_node \' + orb.InteractiveService.lookUpPath(orb.InteractiveService.properties, node.id).label : \'\'" ng-click="node.id ? orb.OrbiterElementsService.activeProperties(orb.InteractiveService.lookUpPath(orb.InteractiveService.elements, node.id)) : null"><div ng-bind=node.id class=c-html-tree-node_node_inner ng-class="node.id === orb.InteractiveService.elementProperties.id ? \'active\' : \'\'"></div></div><div class=c-html-tree-node_children><div ng-repeat="child in node.nodes track by $index" html-tree-node=child></div></div></div>'}}angular.module("app").directive("htmlTreeNode",e)}(),function(){"use strict";function e(e,t,r){var i={htmlTreeView:!1,elementClipboard:null,deleteElement:function(e){var r=e.id;i.findInHtmlTree(r,"delete"),t.elementProperties=null,delete t.elements[r]},copyElement:function(e){var t=i.findInHtmlTree(e.id);t&&(i.elementClipboard=i.aggregateElementData(t.element))},pasteElement:function(e){var r=function(e,n){var o=i.giveUniqueId(e),a=o.nodes;delete o.nodes;var l=n.nodes.length;n.nodes.push({id:o.id,nodes:[]}),t.elements[o.id]=o;for(var s=0;s<a.length;s++)r(a[s],n.nodes[l])},n=i.findInHtmlTree(e.id);i.elementClipboard&&n&&r(i.elementClipboard,n.element)},moveElementUp:function(e){var t=i.findInHtmlTree(e.id),r=t.index?t.index-1:t.index;t.parent.nodes.splice(r,0,t.parent.nodes.splice(t.index,1)[0])},moveElementDown:function(e){var t=i.findInHtmlTree(e.id),r=t.index+1;t.parent.nodes.splice(r,0,t.parent.nodes.splice(t.index,1)[0])},findInHtmlTree:function(e,r){function i(n){for(var o=0;o<n.nodes.length;o++){if(n.nodes[o].id===e)return"delete"===r?(n.nodes.splice(o,1),t.htmlTree):{parent:n,index:o,element:n.nodes[o]};if(n.nodes[o].nodes.length>0)return i(n.nodes[o])}}return i(t.htmlTree)},giveUniqueId:function(e){e=angular.copy(e);var r=1;e.id=e.id||e.label,e.tempId=e.id;var i=e.id;if(t.elements.hasOwnProperty(e.id)){for(;t.elements.hasOwnProperty(e.id+" "+r);)r++;e.id=e.id+" "+r,e.tempId=e.id}if(e.id!==i)for(var n in e.properties)if(e.properties[n].bind){var o=e.properties[n].bind.split(".");o[1]===i&&(o[1]=e.id,e.properties[n].bind=o.join("."))}return e},aggregateElementData:function(e){var r=angular.copy(t.elements[e.id]);r.nodes=angular.copy(e.nodes);for(var n=0;n<r.nodes.length;n++)r.nodes[n]=i.aggregateElementData(r.nodes[n]);return r},addToInteractive:function(e,r){var n=i.giveUniqueId(r);n.created=(new Date).getTime(),n.orbiterType="element";for(var o in n.properties)n.properties[o].bind=n.properties[o].bind?n.properties[o].bind:"elements."+n.id+".properties."+o;return e.id!==n.id?(e.nodes.push({id:n.id,nodes:[]}),delete n.nodes,t.elements[n.id]=n,i.activeProperties(t.elements[n.id]),e.nodes[e.nodes.length-1]):!1},stagedElementIdConflict:null,updateElementId:function(e){function r(){for(var r in t.elements)if(t.elements[r].id===e.id){t.elements[r].id=r;break}}function n(e){for(var t=0;t<e.nodes.length;t++)e.nodes[t].id===o&&(e.nodes[t].id=a),e.nodes[t].nodes.length>0&&n(e.nodes[t])}var o=e.id,a=e.tempId;if(a)if(a.indexOf(".")>-1)i.stagedElementIdConflict="Element name cannont contain periods(.)",r();else if(t.elements.hasOwnProperty(a)&&e.created!==t.elements[a].created)i.stagedElementIdConflict="There is already an element with this name",r();else{i.stagedElementIdConflict=null;for(var l in e.properties){var s=e.properties[l].bind.split(".");s[1]===e.id&&(s[1]=a,e.properties[l].bind=s.join("."))}t.elements[a]=angular.copy(e),t.elements[a].id=a,delete t.elements[o],n(t.htmlTree),i.activeProperties(t.elements[a])}else i.stagedElementIdConflict="Element name is required",r()},activeProperties:function(e){t.elementProperties&&(t.elementProperties.active=!1),e.active=!0,t.elementProperties=e}};return i}e.$inject=["$localStorage","InteractiveService","OrbiterElementTypes"],angular.module("app").service("OrbiterElementsService",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner ng-controller="OrbiterCtlr as orb"><h3><span>Available&nbsp;<drop-down options="[\'properties\', \'elements\',\'libraries\', \'templates\']" model=orb.OrbiterService key=dialogueModelType></drop-down></span> <span><button class=circle ng-if=orb.OrbiterService.selectedProperty ng-click="orb.OrbiterService.saveSelectedProperty(orb.OrbiterService.selectedProperty);orb.OrbiterService.dialogueModelType=null"><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterService.dialogueModelType=null"><i class="fa fa-close"></i></button></span></h3><div class=c-dialogue_input><div class=property ng-repeat="(libraryKey, library) in orb.InteractiveService.libraries track by $index" ng-class="libraryPropertyToggled[libraryKey] ? \'libraryExpanded\' : \'\'"><div class="inline-inputs readonly toggler" ng-click="libraryPropertyToggled[libraryKey] ? libraryPropertyToggled[libraryKey]=false : libraryPropertyToggled[libraryKey]=true"><label ng-bind=libraryKey></label></div><div class=inner-property><div ng-repeat="(propertyKey, property) in library track by $index" class=property><div class="inline-inputs readonly" ng-class="\'libraries.\'+ libraryKey +\'.\'+ propertyKey === orb.OrbiterService.selectedProperty.path ? \'active\' : \'\'" ng-click="orb.OrbiterService.selectedProperty? orb.OrbiterService.selectedProperty.path=\'libraries.\'+ libraryKey +\'.\'+ propertyKey : null"><label ng-bind=propertyKey></label> <span ng-bind="orb.typeOfSafe(library, propertyKey)"></span></div></div></div></div></div></div>'}}angular.module("app").directive("librariesDialogue",e)}(),function(){"use strict";function e(e,t,r){var i={};return i}e.$inject=["$localStorage","InteractiveService","InteractiveLibraries"],angular.module("app").service("OrbiterLibrariesService",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner><h2><span><el ng-bind="orb.OrbiterPropertyService.stagedProperty.originalKey? \'Edit\' : \'New\'"></el>&nbsp;property</span> <span><button class=circle ng-click=orb.OrbiterPropertyService.insertNewProperty(orb.OrbiterPropertyService.stagedProperty)><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterPropertyService.stagedProperty=null"><i class="fa fa-close"></i></button></span></h2><div class=c-dialogue_input ng-if=orb.OrbiterPropertyService.stagedProperty style="background: rgba(0, 0, 0, 0.42); padding: 14px; box-sizing: border-box;"><small class=error ng-if=orb.OrbiterPropertyService.stagedPropertyErrors>Errors detected, please check</small><property-element property=orb.OrbiterPropertyService.stagedProperty new-property=true property-key=orb.OrbiterPropertyService.stagedProperty.key parent=orb.InteractiveService.properties></property-element></div></div>'}}angular.module("app").directive("newPropertyDialogue",e)}(),function(){"use strict";function e(e,t,r){var i=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++)if(i[r]!==n[r])return!1;var o=JSON.stringify(e),a=JSON.stringify(t);return o===a},n={stagedProperty:null,stagedPropertyErrors:!1,buildObject:function(e,t){if(e.errors={key:null,type:null},!e.key&&t&&"array"!==t.type&&(n.stagedPropertyErrors=!0,e.errors.key="Property name is required"),e.type){if("text"===e.type||"number"===e.type)return e.defaultValue;if("object"===e.type){var r={};if(e.defaultValue)for(var i=0;i<e.defaultValue.length;i++)r[e.defaultValue[i].key]=n.buildObject(e.defaultValue[i],e);return r}if("array"===e.type){var r=[];if(e.defaultValue)for(var i=0;i<e.defaultValue.length;i++)r.push(n.buildObject(e.defaultValue[i],e));return r}return null}return n.stagedPropertyErrors=!0,e.errors.type="Data type is required",null},insertNewProperty:function(e){e.errors={key:null,type:null},n.stagedPropertyErrors=!1,e.key||"array"===e.type?(t.properties.hasOwnProperty(e.key)&&!e.hasOwnProperty("originalKey")||t.properties.hasOwnProperty(e.key)&&e.hasOwnProperty("originalKey")&&e.key!==e.originalKey)&&(n.stagedPropertyErrors=!0,e.errors.key="There is already a property with this name"):(n.stagedPropertyErrors=!0,e.errors.key="Property name is required"),e.type||(n.stagedPropertyErrors=!0,e.errors.type="Data type is required"),"object"===e.type||"array"===e.type?e.value=n.buildObject(e):e.value=e.defaultValue,n.stagedPropertyErrors||(e.hasOwnProperty("originalKey")&&delete e.originalKey,e.orbiterType="property",t.properties[e.key]=e,n.stagedProperty=null)},editProperty:function(e){n.stagedProperty=angular.copy(e),n.stagedProperty.originalKey=angular.copy(e.key)},deleteProperty:function(e,r){e.hasOwnProperty("defaultValue")&&void 0!==e.defaultValue[r]&&(e=e.defaultValue),e&&void 0!==r&&(Array.isArray(e)?e.splice(r,1):delete e[r],i(e,t.properties)&&(n.stagedProperty=null,n.propertyDialogue=!0))},addProperty:function(e){"object"!==e.type&&"array"!==e.type||(e.defaultValue&&"object"==typeof e.defaultValue||(e.defaultValue=[]),e.defaultValue.push({key:null,type:null,defaultValue:null,value:null}))},buildProperty:function(e){"object"===e.type||"array"===e.type?e.value=n.buildObject(e):e.value=e.defaultValue,e.hasOwnProperty("originalKey")&&delete e.originalKey,t.properties[e.key]=e}};return n}e.$inject=["$localStorage","InteractiveService","InteractiveProperties"],angular.module("app").service("OrbiterPropertyService",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner ng-controller="OrbiterCtlr as orb"><h3><span>Available&nbsp;<drop-down options="[\'properties\', \'elements\',\'libraries\', \'templates\']" model=orb.OrbiterService key=dialogueModelType></drop-down></span> <span><button class=circle ng-if=!orb.OrbiterService.selectedProperty ng-click="orb.OrbiterPropertyService.stagedProperty={key:null,defaultValue:null,type:null};orb.OrbiterService.dialogueModelType=null"><i class="fa fa-plus"></i></button> <button class=circle ng-if=orb.OrbiterService.selectedProperty ng-click="orb.OrbiterService.saveSelectedProperty(orb.OrbiterService.selectedProperty);orb.OrbiterService.dialogueModelType=null; orb.OrbiterService.selectedProperty=null;"><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterService.dialogueModelType=null"><i class="fa fa-close"></i></button></span></h3><div class=c-dialogue_input><property-element ng-repeat="(propertyKey, property) in orb.InteractiveService[orb.OrbiterService.dialogueModelType] track by $index" property=property property-key=propertyKey root=true parent=orb.InteractiveService.properties path="orb.OrbiterService.dialogueModelType +\'.\'+ propertyKey +\'.value\'"></property-element></div></div>'}}angular.module("app").directive("propertyDialogue",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{property:"=property",propertyKey:"=propertyKey",newProperty:"=newProperty",root:"=root",parent:"=parent",path:"=path"},template:'<div class=property ng-controller="OrbiterCtlr as orb"><div class="inline-inputs readonly" ng-if=!newProperty ng-class="path === orb.OrbiterService.selectedProperty.path ? \'active\' : \'\'" ng-click="orb.OrbiterService.selectedProperty? orb.OrbiterService.selectedProperty.path=path : null"><button ng-if="root && !orb.OrbiterService.selectedProperty" class="circle small" style="position: relative; top: 2px; margin-right: 7px;" ng-click="orb.OrbiterPropertyService.stagedProperty=true; orb.OrbiterPropertyService.editProperty(property); orb.OrbiterService.dialogueModelType=null"><i class="fa fa-pencil"></i></button> <label ng-bind=propertyKey></label> <span ng-bind=property.type></span> <span ng-if="property.type === \'text\' || property.type === \'number\'" ng-bind=property.defaultValue></span></div><div class=inline-inputs ng-if=newProperty><input ng-if="parent.type !== \'array\'" ng-model=property.key placeholder=name type=text ng-class="property.errors.key ? \'red\' : \'\'"><drop-down model=property key=type options="{text:\'text\', object:\'object\', array:\'array\', number:\'number\'}" ng-class="property.errors.type ? \'red\' : \'\'"></drop-down><input ng-if="property.type === \'text\'" ng-model=property.defaultValue ng-trim=false type=text placeholder="default value"> <input ng-if="property.type === \'number\'" ng-model=property.defaultValue type=number placeholder="default value"> <button ng-if="property.type===\'object\' || property.type===\'array\'" ng-click=orb.OrbiterPropertyService.addProperty(property) ng-bind="property.type===\'array\' ? \'Add element\' : \'Add property\'"></button> <button class=orange style="margin-left: 7px;" ng-click="orb.OrbiterPropertyService.deleteProperty(parent, propertyKey)"><i class="fa fa-trash"></i></button></div><property-element class=inner-property ng-if="property.type===\'object\' || property.type===\'array\'" new-property=newProperty ng-repeat="(childPropertyKey, childProperty) in property.defaultValue track by childPropertyKey" property=childProperty property-key=childProperty.key parent=property path="path +\'.\'+ (childProperty.key || childPropertyKey)"></property-element></div>'}}angular.module("app").directive("propertyElement",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner><h2>New template</h2><div class=c-dialogue_input><input type=text ng-model=orb.OrbiterTemplatesService.newTemplate.title placeholder="template name"></div><div class=c-dialogue_input style="text-align: right;"><button class=circle ng-click=orb.OrbiterTemplatesService.addNewTemplate() ng-if=orb.OrbiterTemplatesService.newTemplate.title><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterTemplatesService.newTemplate=null"><i class="fa fa-close"></i></button></div></div>'}}angular.module("app").directive("newTemplateDialogue",e)}(),function(){"use strict";function e(e,t,r,i,n){var o={newTemplate:null,switchTemplate:function(e){t.htmlTree[t.htmlTree.current].nodes=angular.copy(t.htmlTree.nodes),t.htmlTree.current=e,t.htmlTree.nodes=angular.copy(t.htmlTree[t.htmlTree.current].nodes),i.save()},addNewTemplate:function(){t.htmlTree[o.newTemplate.title]={nodes:[]},o.switchTemplate(o.newTemplate.title),r.addToInteractive(t.htmlTree,n.block),i.save(),o.newTemplate=null},totalNodes:function(e){function r(e){i+=e.nodes.length;for(var t=0;t<e.nodes.length;t++)r(e.nodes[t])}var i=0;return r(t.htmlTree[e]),i}};return o}e.$inject=["$localStorage","InteractiveService","OrbiterElementsService","OrbiterService","OrbiterElementTypes"],angular.module("app").service("OrbiterTemplatesService",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<div class=c-dialogue_inner ng-controller="OrbiterCtlr as orb"><h3><span>Available&nbsp;<drop-down options="[\'properties\', \'elements\',\'libraries\', \'templates\']" model=orb.OrbiterService key=dialogueModelType></drop-down></span> <span><button class=circle ng-if=orb.OrbiterService.selectedProperty ng-click="orb.OrbiterService.saveSelectedProperty(orb.OrbiterService.selectedProperty);orb.OrbiterService.dialogueModelType=null"><i class="fa fa-check"></i></button> <button class="circle orange" ng-click="orb.OrbiterService.dialogueModelType=null"><i class="fa fa-close"></i></button></span></h3><div class=c-dialogue_input><div class=property ng-repeat="(templateKey, template) in orb.InteractiveService.htmlTree track by $index" ng-if="templateKey !== \'nodes\' && templateKey !== \'current\'"><div class="inline-inputs readonly" ng-class="\'htmlTree.\'+ templateKey === orb.OrbiterService.selectedProperty.path ? \'active\' : \'\'" ng-click="orb.OrbiterService.selectedProperty? orb.OrbiterService.selectedProperty.path=\'htmlTree.\'+ templateKey : null"><label ng-bind=templateKey></label> <span ng-bind="orb.OrbiterTemplatesService.totalNodes(templateKey) + \' elements\'"></span></div></div></div></div>'}}angular.module("app").directive("templatesDialogue",e)}();
//# sourceMappingURL=orbiter.min.js.map